{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'Verify',\n  data() {\n    return {\n      contact: '',\n      digits: ['', '', '', '', '', ''],\n      digitInputs: [],\n      error: ''\n    };\n  },\n  mounted() {\n    // Get email from localStorage\n    this.contact = localStorage.getItem('verifyEmail') || '';\n\n    // Focus first input\n    this.$nextTick(() => {\n      this.digitInputs = this.$refs.digitInputs;\n      this.digitInputs[0]?.focus();\n    });\n  },\n  methods: {\n    moveFocus(i) {\n      if (this.digits[i].length === 1 && i < 5) {\n        this.digitInputs[i + 1]?.focus();\n      }\n    },\n    handleKeydown(e, i) {\n      if (e.key === 'Backspace' && !this.digits[i] && i > 0) {\n        this.digitInputs[i - 1]?.focus();\n      } else if (e.key === 'Enter') {\n        this.verifyCode();\n      }\n    },\n    async verifyCode() {\n      const fullCode = this.digits.join('');\n      if (!/^\\d{6}$/.test(fullCode)) {\n        this.error = 'Code must be 6 digits.';\n        return;\n      }\n      try {\n        const response = await fetch('http://localhost:3000/verify-code', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email: this.contact,\n            code: fullCode\n          })\n        });\n        const result = await response.json();\n        if (result.success) {\n          alert(' Verified successfully!');\n          this.$router.push('/feed');\n        } else {\n          this.error = result.message || 'Invalid code. Try again.';\n        }\n      } catch (err) {\n        console.error(err);\n        this.error = 'Server error. Please try again.';\n      }\n    },\n    async resendCode() {\n      try {\n        const res = await fetch('http://localhost:3000/send-code', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email: this.contact\n          })\n        });\n        const data = await res.json();\n        if (data.success) {\n          alert('ðŸ“¨ A new code was sent!');\n          this.digits = ['', '', '', '', '', ''];\n          this.$nextTick(() => this.digitInputs[0]?.focus());\n          this.error = '';\n        } else {\n          this.error = data.message || 'Failed to resend code.';\n        }\n      } catch (err) {\n        console.error(err);\n        this.error = 'Server error. Please try again.';\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","contact","digits","digitInputs","error","mounted","localStorage","getItem","$nextTick","$refs","focus","methods","moveFocus","i","length","handleKeydown","e","key","verifyCode","fullCode","join","test","response","fetch","method","headers","body","JSON","stringify","email","code","result","json","success","alert","$router","push","message","err","console","resendCode","res"],"sources":["D:\\login-feed\\src\\components\\Verify.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen flex items-center justify-center bg-gray-100 px-4\">\r\n    <div class=\"w-full max-w-sm bg-white p-6 rounded-md shadow text-center\">\r\n      <h1 class=\"text-2xl font-bold text-green-600 mb-1\">Verify Code</h1>\r\n      <p class=\"text-xs text-gray-600 mb-4\">\r\n        We've sent a 6-digit code to <span class=\"font-medium\">{{ contact }}</span>\r\n      </p>\r\n\r\n      <!-- 6 Code Boxes -->\r\n      <div class=\"flex justify-between gap-2 mb-4\">\r\n        <input\r\n          v-for=\"(d, i) in digits\"\r\n          :key=\"i\"\r\n          v-model=\"digits[i]\"\r\n          ref=\"digitInputs\"\r\n          maxlength=\"1\"\r\n          type=\"text\"\r\n          class=\"w-10 h-12 text-center border border-gray-300 rounded text-xl\"\r\n          @input=\"moveFocus(i)\"\r\n          @keydown=\"(e) => handleKeydown(e, i)\"\r\n        />\r\n      </div>\r\n\r\n      <p v-if=\"error\" class=\"text-red-500 text-sm mb-3\">{{ error }}</p>\r\n\r\n      <!-- Submit -->\r\n      <button\r\n        @click=\"verifyCode\"\r\n        class=\"w-full bg-green-500 text-white font-semibold py-2 rounded hover:bg-green-600 text-sm\"\r\n      >\r\n        Verify\r\n      </button>\r\n\r\n      <!-- Resend -->\r\n      <p class=\"text-xs text-gray-500 mt-4\">\r\n        Didn't receive it?\r\n        <span class=\"text-blue-500 hover:underline cursor-pointer\" @click=\"resendCode\">Resend</span>\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Verify',\r\n\r\n  data() {\r\n    return {\r\n      contact: '',\r\n      digits: ['', '', '', '', '', ''],\r\n      digitInputs: [],\r\n      error: ''\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    // Get email from localStorage\r\n    this.contact = localStorage.getItem('verifyEmail') || ''\r\n\r\n    // Focus first input\r\n    this.$nextTick(() => {\r\n      this.digitInputs = this.$refs.digitInputs\r\n      this.digitInputs[0]?.focus()\r\n    })\r\n  },\r\n\r\n  methods: {\r\n    moveFocus(i) {\r\n      if (this.digits[i].length === 1 && i < 5) {\r\n        this.digitInputs[i + 1]?.focus()\r\n      }\r\n    },\r\n\r\n    handleKeydown(e, i) {\r\n      if (e.key === 'Backspace' && !this.digits[i] && i > 0) {\r\n        this.digitInputs[i - 1]?.focus()\r\n      } else if (e.key === 'Enter') {\r\n        this.verifyCode()\r\n      }\r\n    },\r\n\r\n    async verifyCode() {\r\n      const fullCode = this.digits.join('')\r\n\r\n      if (!/^\\d{6}$/.test(fullCode)) {\r\n        this.error = 'Code must be 6 digits.'\r\n        return\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('http://localhost:3000/verify-code', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ email: this.contact, code: fullCode })\r\n        })\r\n\r\n        const result = await response.json()\r\n\r\n        if (result.success) {\r\n          alert(' Verified successfully!')\r\n          this.$router.push('/feed')\r\n        } else {\r\n          this.error = result.message || 'Invalid code. Try again.'\r\n        }\r\n      } catch (err) {\r\n        console.error(err)\r\n        this.error = 'Server error. Please try again.'\r\n      }\r\n    },\r\n\r\n    async resendCode() {\r\n      try {\r\n        const res = await fetch('http://localhost:3000/send-code', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ email: this.contact })\r\n        })\r\n        const data = await res.json()\r\n\r\n        if (data.success) {\r\n          alert('ðŸ“¨ A new code was sent!')\r\n          this.digits = ['', '', '', '', '', '']\r\n          this.$nextTick(() => this.digitInputs[0]?.focus())\r\n          this.error = ''\r\n        } else {\r\n          this.error = data.message || 'Failed to resend code.'\r\n        }\r\n      } catch (err) {\r\n        console.error(err)\r\n        this.error = 'Server error. Please try again.'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}