{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen bg-gray flex items-center justify-center\"\n};\nconst _hoisted_2 = {\n  class: \"flex w-full max-w-6xl items-center justify-between px-8 gap-10\"\n};\nconst _hoisted_3 = {\n  class: \"flex-1mt-8\"\n};\nconst _hoisted_4 = {\n  class: \"w-65 hidden md:block max-w-full\"\n};\nconst _hoisted_5 = {\n  class: \"flex items-center pl-3 cursor-pointer\"\n};\nconst _hoisted_6 = {\n  class: \"border-2 p-8 rounded-xl shadow-md w-full max-w-sm mb-50\"\n};\nconst _hoisted_7 = {\n  class: \"flex justify-center mb-4 mt-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Icon = _resolveComponent(\"Icon\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_GoogleSignInButton = _resolveComponent(\"GoogleSignInButton\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" LEFT TEXT \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"aside\", null, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", _hoisted_5, [_createVNode(_component_Icon, {\n    icon: \"tdesign:chat-bubble\",\n    class: \"w-14 h-14 text-white transition-colors bg-green-500 border-4 border-green-500 rounded-xl duration-200 hover:text-gray-600 mb-10\",\n    onClick: _ctx.goToMainfeed\n  }, null, 8 /* PROPS */, [\"onClick\"])]), _cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"flex-1 items-center gap-4\"\n  }, [_createElementVNode(\"p\", {\n    class: \"text-gray-600 leading-relaxed\"\n  }, \" Connect with the people in your life and the world. Secure and safe sharing your activity. \")], -1 /* CACHED */)), _createCommentVNode(\" ACTION MENU \"), _createCommentVNode(\"---  <div class=\\\"flex flex-col gap-6 text-black\\\">\\r\\n          <div class=\\\"flex items-center gap-3\\\">\\r\\n          </div>\\r\\n      \\r\\n          <div class=\\\"flex items-center gap-3\\\">\\r\\n           <Icon icon=\\\"uil:comment\\\" class=\\\"w-10 h-10\\\"/>\\r\\n            <span class=\\\"text-xl font-semibold\\\">Share</span>\\r\\n          </div>\\r\\n        </div>\\r\\n-\")]), _createCommentVNode(\" ACTION + STORY STACK \"), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"relative items-center mt-10 p-2\"\n  }, [_createCommentVNode(\" CENTER STORY STACK \\r\\n      <div class=\\\"relative   items-center w-[360px] h-[320px] mt-10 px-4 mr-80  p-2\\\">\\r\\n        <img\\r\\n          v-for=\\\"(story, i) in stories\\\"\\r\\n          :key=\\\"i\\\"\\r\\n          :src=\\\"story.img\\\"\\r\\n          class=\\\"story-card\\\"\\r\\n          :style=\\\"{\\r\\n            transform: `rotate(${story.rotate})`,\\r\\n            left: story.left,\\r\\n            zIndex: story.z\\r\\n          }\\\"/>\\r\\n        </div>\\r\\n      \")], -1 /* CACHED */))])]), _createCommentVNode(\" LOGIN FORM \"), _createElementVNode(\"div\", _hoisted_6, [_createCommentVNode(\" Email \"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"Email or Phone number\",\n    class: \"w-full mb-4 px-4 py-2 border-2 rounded outline-none focus:ring-2 focus:ring-blue-500\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    autocomplete: \"off\",\n    name: \"login_email\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]]), _createCommentVNode(\" Password \"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    placeholder: \"Password\",\n    class: \"w-full mb-4 px-4 py-2 border-2 rounded outline-none focus:ring-2 focus:ring-blue-500\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n    autocomplete: \"new-password\",\n    name: \"login_password\",\n    readonly: \"\",\n    onFocus: _cache[2] || (_cache[2] = $event => $event.target.removeAttribute('readonly'))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $data.password]]), _createElementVNode(\"button\", {\n    class: \"w-full bg-blue-600 text-white font-semibold py-2 rounded hover:bg-blue-700 mb-2\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.login && $options.login(...args))\n  }, \" Login \"), _createVNode(_component_router_link, {\n    to: \"/forgot\",\n    class: \"text-sm text-center text-gray-600 mb-4 block\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\" Forgot your password ? \")])),\n    _: 1 /* STABLE */,\n    __: [6]\n  }), _cache[8] || (_cache[8] = _createElementVNode(\"hr\", {\n    class: \"mb-4\"\n  }, null, -1 /* CACHED */)), _createVNode(_component_router_link, {\n    to: \"/create\",\n    class: \"block\"\n  }, {\n    default: _withCtx(() => _cache[7] || (_cache[7] = [_createElementVNode(\"button\", {\n      class: \"bg-blue-500 text-white rounded-xl w-full py-2 rounded text-sm font-semibold hover:bg-gray-400\"\n    }, \" Create your account \", -1 /* CACHED */)])),\n    _: 1 /* STABLE */,\n    __: [7]\n  }), _createCommentVNode(\" New Google Sign-In Button \"), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_GoogleSignInButton, {\n    redirectAfter: \"ProfileUser\"\n  })])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","_hoisted_4","_hoisted_5","_createVNode","_component_Icon","icon","onClick","_ctx","goToMainfeed","_hoisted_6","type","placeholder","$data","email","$event","autocomplete","name","password","readonly","onFocus","_cache","target","removeAttribute","args","$options","login","_component_router_link","to","_hoisted_7","_component_GoogleSignInButton","redirectAfter"],"sources":["D:\\login-feed\\src\\components\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray flex items-center justify-center\">\r\n  <div class=\"flex w-full max-w-6xl items-center justify-between px-8 gap-10\">\r\n\r\n      <!-- LEFT TEXT -->\r\n\r\n\r\n<div class=\"flex-1mt-8  \">\r\n<aside >\r\n<div class=\" w-65 hidden md:block max-w-full\">\r\n<button class=\"flex items-center pl-3 cursor-pointer \">\r\n<Icon icon=\"tdesign:chat-bubble\" \r\nclass=\"w-14 h-14 text-white transition-colors\r\n bg-green-500 border-4 border-green-500 rounded-xl\r\n  duration-200 hover:text-gray-600 mb-10\" \r\n @click=\"goToMainfeed\"/>\r\n</button>\r\n\r\n\r\n<div class=\"flex-1 items-center gap-4 \">\r\n<p class=\"text-gray-600 leading-relaxed\">\r\n          Connect with the people in your life and the world. \r\n          Secure and safe sharing your activity.\r\n        </p>\r\n</div>\r\n\r\n   <!-- ACTION MENU -->\r\n    <!-----  <div class=\"flex flex-col gap-6 text-black\">\r\n          <div class=\"flex items-center gap-3\">\r\n          </div>\r\n      \r\n          <div class=\"flex items-center gap-3\">\r\n           <Icon icon=\"uil:comment\" class=\"w-10 h-10\"/>\r\n            <span class=\"text-xl font-semibold\">Share</span>\r\n          </div>\r\n        </div>\r\n--->\r\n      </div>\r\n\r\n      <!-- ACTION + STORY STACK -->\r\n      <div class=\"relative items-center mt-10 p-2  \">\r\n    <!-- CENTER STORY STACK \r\n      <div class=\"relative   items-center w-[360px] h-[320px] mt-10 px-4 mr-80  p-2\">\r\n        <img\r\n          v-for=\"(story, i) in stories\"\r\n          :key=\"i\"\r\n          :src=\"story.img\"\r\n          class=\"story-card\"\r\n          :style=\"{\r\n            transform: `rotate(${story.rotate})`,\r\n            left: story.left,\r\n            zIndex: story.z\r\n          }\"/>\r\n        </div>\r\n      -->\r\n  \r\n</div>\r\n\r\n</aside>\r\n\r\n</div>\r\n\r\n\r\n\r\n        \r\n \r\n\r\n\r\n<!-- LOGIN FORM -->\r\n<div class=\" border-2   p-8 rounded-xl shadow-md w-full max-w-sm  mb-50\">\r\n<!-- Email -->\r\n<input\r\n  type=\"text\"\r\n  placeholder=\"Email or Phone number\"\r\n  class=\"w-full mb-4 px-4 py-2 border-2 rounded outline-none focus:ring-2 focus:ring-blue-500\"\r\n  v-model=\"email\"\r\n  autocomplete=\"off\"\r\n  name=\"login_email\"\r\n/>\r\n\r\n<!-- Password -->\r\n<input\r\n  type=\"password\"\r\n  placeholder=\"Password\"\r\n  class=\"w-full mb-4 px-4 py-2 border-2 rounded outline-none focus:ring-2 focus:ring-blue-500\"\r\n  v-model=\"password\"\r\n  autocomplete=\"new-password\"\r\n  name=\"login_password\"\r\n  readonly\r\n  @focus=\"$event.target.removeAttribute('readonly')\"/>\r\n\r\n        <button\r\n          class=\"w-full bg-blue-600 text-white \r\n          font-semibold py-2 rounded hover:bg-blue-700 mb-2\"\r\n          @click=\"login\">\r\n          Login\r\n  </button>\r\n\r\n        <router-link\r\n          to=\"/forgot\"\r\n          class=\"text-sm text-center  text-gray-600 mb-4 block\">\r\n          Forgot your password ?\r\n        </router-link>\r\n\r\n        <hr class=\"mb-4\" />\r\n\r\n        <router-link to=\"/create\" class=\"block\">\r\n          <button\r\n            class=\"bg-blue-500 text-white  rounded-xl w-full\r\n             py-2 rounded text-sm font-semibold hover:bg-gray-400\">\r\n            Create your account\r\n          </button>\r\n        </router-link>\r\n        <!-- New Google Sign-In Button -->\r\n<div class=\"flex justify-center mb-4 mt-4\">\r\n<GoogleSignInButton redirectAfter=\"ProfileUser\" />\r\n</div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n   \r\n  </div>\r\n\r\n\r\n  \r\n</template>\r\n\r\n<script>\r\nimport { Icon } from '@iconify/vue';\r\nimport story1 from '@/assets/Khmer.jpg'\r\nimport story2 from '@/assets/jena8.jpg'\r\nimport story3 from '@/assets/sinayun_xyn.jpg'\r\nimport GoogleSignInButton from '@/components/GoogleSignInButton.vue';\r\nimport { signInWithEmailAndPassword, signOut } from 'firebase/auth'\r\n\r\nimport { auth } from '../firebase'\r\n\r\n\r\n\r\n\r\nexport default {\r\n  name: 'Login',\r\n   components:{\r\n     Icon ,\r\n   GoogleSignInButton,\r\n\r\n   },\r\n\r\n  data() {\r\n    return {\r\n      email: '',\r\n      password: '',\r\n      loading: false,\r\n      showPassword: false,\r\n\r\n\r\n      stories: [\r\n        { img: story2, rotate: '-14deg', right: '70px', z: 2 },\r\n        { img: story1, rotate: '12deg', left: '300px', z: 1},\r\n      \r\n        { img: story3, rotate: '-2deg', left: '168px', z: 1 }\r\n      ]\r\n    }\r\n  },\r\n\r\n \r\n  // THIS clears password on refresh / revisit login page\r\n  mounted() {\r\n    this.password = '';\r\n  },\r\n\r\n\r\n \r\n  methods: {\r\n async login() {\r\n  if (this.loading) return;\r\n  if (!this.email || !this.password) {\r\n    alert('Please enter both email and password.');\r\n    return;\r\n  }\r\n\r\n  this.loading = true;\r\n\r\n  try {\r\n    const { user } = await signInWithEmailAndPassword(auth, this.email, this.password);\r\n\r\n   if (!user.emailVerified) {\r\n  alert('Please verify your email before logging in.');\r\n  await signOut(auth); // This is why it kicks you out\r\n  return;\r\n}\r\n\r\n    this.password = '';\r\n    this.$router.push('/feed');\r\n\r\n  } catch (e) {\r\n    // Check if account exists but has no password (Google users)\r\n    if (e.code === 'auth/invalid-credential' || e.code === 'auth/wrong-password') {\r\n      alert(\"Invalid password. If you originally joined with Google, please use the 'Connect with Google' button or use 'Forgot Password' to create a manual login password.\");\r\n    } else {\r\n      alert(this.getErrorMessage(e.code));\r\n    }\r\n  } finally {\r\n    this.loading = false;\r\n  }\r\n},\r\n\r\n\r\n\r\n// Inside your Sidebar/Settings component logout logic\r\nasync goLogin() {\r\n  await signOut(auth);\r\n  localStorage.clear(); // Important: Wipes Gmail avatar/name from memory\r\n  this.$router.push('/').then(() => {\r\n    window.location.reload(); // Ensures all Vue data is reset to empty strings\r\n  });\r\n},\r\n\r\n   getErrorMessage(code) {\r\n  const messages = {\r\n    'auth/user-not-found': 'Account not found.',\r\n    'auth/wrong-password': 'Incorrect password.',\r\n    'auth/invalid-credential': 'Login failed. If you signed up with Google, please use the Google button.', // Added this\r\n    'auth/invalid-email': 'Invalid email address.',\r\n    // ...\r\n  }\r\n  return messages[code] || `Error: ${code}`; // Show the code so you can debug\r\n}\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n\r\n\r\n\r\n<style scoped>\r\n\r\n.input {\r\n  @apply w-full mb-3 px-3 py-2 border rounded text-sm outline-none focus:ring-2 focus:ring-blue-500;\r\n}\r\n\r\n.btn-primary {\r\n  @apply w-full bg-blue-600 text-white py-2 rounded font-semibold;\r\n}\r\n\r\n.btn-success {\r\n  @apply w-full bg-green-600 text-white py-2 rounded text-sm font-semibold;\r\n}\r\n.story-card:hover {\r\n  transform: translateY(-8px) scale(1.05);\r\n  z-index: 50;\r\n}\r\n.story-card {\r\n  @apply absolute top-0\r\n  w-[148px] h-[240px]\r\n  rounded-2xl\r\n  object-cover\r\n  shadow-[0_20px_40px_rgba(0,0,0,0.78)]\r\n  transition-transform duration-300 ease-out;\r\n}\r\n\r\n/* Hover animation */\r\n.story-card:hover {\r\n  transform: translateY(-8px) scale(1.05) rotate(var(--tw-rotate));\r\n}\r\n\r\n.story-card:hover {\r\n  transform: translateY(-8px) scale(1.05);\r\n}\r\n\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAuD;;EAC7DA,KAAK,EAAC;AAAgE;;EAKxEA,KAAK,EAAC;AAAc;;EAEpBA,KAAK,EAAC;AAAkC;;EACrCA,KAAK,EAAC;AAAwC;;EA2DjDA,KAAK,EAAC;AAA6D;;EA6CnEA,KAAK,EAAC;AAA+B;;;;;uBAjHxCC,mBAAA,CAyHM,OAzHNC,UAyHM,GAxHNC,mBAAA,CAsHQ,OAtHRC,UAsHQ,GApHJC,mBAAA,eAAkB,EAGxBF,mBAAA,CAqDM,OArDNG,UAqDM,GApDNH,mBAAA,CAkDQ,gBAjDRA,mBAAA,CA4BY,OA5BZI,UA4BY,GA3BZJ,mBAAA,CAMS,UANTK,UAMS,GALTC,YAAA,CAIwBC,eAAA;IAJlBC,IAAI,EAAC,qBAAqB;IAChCX,KAAK,EAAC,iIAEmC;IACvCY,OAAK,EAAEC,IAAA,CAAAC;oEAITX,mBAAA,CAKM;IALDH,KAAK,EAAC;EAA4B,IACvCG,mBAAA,CAGY;IAHTH,KAAK,EAAC;EAA+B,GAAC,8FAGjC,E,qBAGLK,mBAAA,iBAAoB,EACnBA,mBAAA,2WASA,C,GAGEA,mBAAA,0BAA6B,E,0BAC7BF,mBAAA,CAgBA;IAhBKH,KAAK,EAAC;EAAmC,IAChDK,mBAAA,scAaK,C,yBAcTA,mBAAA,gBAAmB,EACnBF,mBAAA,CAiDY,OAjDZY,UAiDY,GAhDZV,mBAAA,WAAc,E,gBACdF,mBAAA,CAOE;IANAa,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,uBAAuB;IACnCjB,KAAK,EAAC,sFAAsF;+DACnFkB,KAAA,CAAAC,KAAK,GAAAC,MAAA;IACdC,YAAY,EAAC,KAAK;IAClBC,IAAI,EAAC;iDAFIJ,KAAA,CAAAC,KAAK,E,GAKhBd,mBAAA,cAAiB,E,gBACjBF,mBAAA,CAQsD;IAPpDa,IAAI,EAAC,UAAU;IACfC,WAAW,EAAC,UAAU;IACtBjB,KAAK,EAAC,sFAAsF;+DACnFkB,KAAA,CAAAK,QAAQ,GAAAH,MAAA;IACjBC,YAAY,EAAC,cAAc;IAC3BC,IAAI,EAAC,gBAAgB;IACrBE,QAAQ,EAAR,EAAQ;IACPC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAN,MAAA,IAAEA,MAAM,CAACO,MAAM,CAACC,eAAe;iEAJ5BV,KAAA,CAAAK,QAAQ,E,GAMXpB,mBAAA,CAKG;IAJDH,KAAK,EAAC,iFAC4C;IACjDY,OAAK,EAAAc,MAAA,QAAAA,MAAA,UAAAG,IAAA,KAAEC,QAAA,CAAAC,KAAA,IAAAD,QAAA,CAAAC,KAAA,IAAAF,IAAA,CAAK;KAAE,SAEvB,GAEMpB,YAAA,CAIcuB,sBAAA;IAHZC,EAAE,EAAC,SAAS;IACZjC,KAAK,EAAC;;sBAAgD,MAExD0B,MAAA,QAAAA,MAAA,O,iBAFwD,0BAExD,E;;;gCAEAvB,mBAAA,CAAmB;IAAfH,KAAK,EAAC;EAAM,4BAEhBS,YAAA,CAMcuB,sBAAA;IANDC,EAAE,EAAC,SAAS;IAACjC,KAAK,EAAC;;sBAC9B,MAIS0B,MAAA,QAAAA,MAAA,OAJTvB,mBAAA,CAIS;MAHPH,KAAK,EAAC;IACgD,GAAC,uBAEzD,mB;;;MAEFK,mBAAA,+BAAkC,EAC1CF,mBAAA,CAEM,OAFN+B,UAEM,GADNzB,YAAA,CAAkD0B,6BAAA;IAA9BC,aAAa,EAAC;EAAa,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}