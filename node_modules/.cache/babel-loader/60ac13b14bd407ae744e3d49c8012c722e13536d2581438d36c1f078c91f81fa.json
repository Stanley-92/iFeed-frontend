{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Icon } from '@iconify/vue';\nimport { auth } from '@/firebase';\nimport { GoogleAuthProvider, signInWithPopup, signInWithRedirect, getRedirectResult } from 'firebase/auth';\nexport default {\n  name: 'GoogleSignInButton',\n  components: {\n    Icon\n  },\n  props: {\n    redirectAfter: {\n      type: String,\n      default: 'ProfileUser'\n    } // allow custom redirect page\n  },\n  data() {\n    return {\n      isLoading: false\n    };\n  },\n  async mounted() {\n    try {\n      const result = await getRedirectResult(auth);\n      if (result?.user) {\n        await this.handleGoogleSuccess(result.user);\n      }\n    } catch (error) {\n      console.error('Google redirect error:', error);\n    }\n  },\n  methods: {\n    async handleGoogleSuccess(user) {\n      const displayName = user.displayName || '';\n      const nameParts = displayName.split(' ');\n      const firstName = nameParts[0] || '';\n      const lastName = nameParts.slice(1).join(' ') || '';\n      const googleAvatar = user.photoURL || '';\n      const userData = {\n        firstName,\n        lastName,\n        email: user.email\n      };\n\n      // Save locally for profile display\n      localStorage.setItem('newUserData', JSON.stringify(userData));\n      localStorage.setItem('userUid', user.uid);\n      localStorage.setItem('userEmail', user.email);\n      localStorage.setItem('userDisplayName', displayName);\n      localStorage.setItem('userAvatar', googleAvatar);\n\n      // Redirect\n      await this.$router.push({\n        name: this.redirectAfter\n      });\n    },\n    async signInWithGoogle() {\n      if (this.isLoading) return;\n      this.isLoading = true;\n      const provider = new GoogleAuthProvider();\n      provider.setCustomParameters({\n        prompt: 'select_account'\n      });\n      try {\n        const result = await signInWithPopup(auth, provider);\n        if (result?.user) await this.handleGoogleSuccess(result.user);\n      } catch (error) {\n        if (error.code === 'auth/popup-blocked') {\n          await signInWithRedirect(auth, provider);\n        } else if (error.code !== 'auth/popup-closed-by-user') {\n          console.error('Google sign-in error:', error);\n          alert('Failed to connect Google account.');\n        }\n      } finally {\n        this.isLoading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["Icon","auth","GoogleAuthProvider","signInWithPopup","signInWithRedirect","getRedirectResult","name","components","props","redirectAfter","type","String","default","data","isLoading","mounted","result","user","handleGoogleSuccess","error","console","methods","displayName","nameParts","split","firstName","lastName","slice","join","googleAvatar","photoURL","userData","email","localStorage","setItem","JSON","stringify","uid","$router","push","signInWithGoogle","provider","setCustomParameters","prompt","code","alert"],"sources":["D:\\login-feed\\src\\components\\GoogleSignInButton.vue"],"sourcesContent":["<template>\r\n  <button @click=\"signInWithGoogle\"\r\n    class=\"relative flex items-center justify-center gap-4 px-4 \r\n           py-2 mb-2 text-base font-medium text-gray-700 bg-gray-200 border-2 \r\n           border-gray-300 rounded-full shadow-sm hover:shadow-md \r\n           hover:border-gray-400 focus:outline-none focus:ring-2 \r\n           focus:ring-offset-2 focus:ring-blue-500 transition-shadow\">\r\n    <Icon icon=\"flat-color-icons:google\" class=\"w-6 h-6\" />\r\n    <span>Connect with Google</span>\r\n  </button>\r\n</template>\r\n\r\n<script>\r\nimport { Icon } from '@iconify/vue';\r\nimport { auth } from '@/firebase';\r\nimport { GoogleAuthProvider, signInWithPopup, signInWithRedirect, getRedirectResult } from 'firebase/auth';\r\n\r\nexport default {\r\n  name: 'GoogleSignInButton',\r\n  components: { Icon },\r\n  props: {\r\n    redirectAfter: { type: String, default: 'ProfileUser' } // allow custom redirect page\r\n  },\r\n  data() {\r\n    return { isLoading: false };\r\n  },\r\n  async mounted() {\r\n    try {\r\n      const result = await getRedirectResult(auth);\r\n      if (result?.user) {\r\n        await this.handleGoogleSuccess(result.user);\r\n      }\r\n    } catch (error) {\r\n      console.error('Google redirect error:', error);\r\n    }\r\n  },\r\n  methods: {\r\n    async handleGoogleSuccess(user) {\r\n      const displayName = user.displayName || '';\r\n      const nameParts = displayName.split(' ');\r\n      const firstName = nameParts[0] || '';\r\n      const lastName = nameParts.slice(1).join(' ') || '';\r\n      const googleAvatar = user.photoURL || '';\r\n\r\n      const userData = { firstName, lastName, email: user.email };\r\n\r\n      // Save locally for profile display\r\n      localStorage.setItem('newUserData', JSON.stringify(userData));\r\n      localStorage.setItem('userUid', user.uid);\r\n      localStorage.setItem('userEmail', user.email);\r\n      localStorage.setItem('userDisplayName', displayName);\r\n      localStorage.setItem('userAvatar', googleAvatar);\r\n\r\n      // Redirect\r\n      await this.$router.push({ name: this.redirectAfter });\r\n    },\r\n    async signInWithGoogle() {\r\n      if (this.isLoading) return;\r\n      this.isLoading = true;\r\n\r\n      const provider = new GoogleAuthProvider();\r\n      provider.setCustomParameters({ prompt: 'select_account' });\r\n\r\n      try {\r\n        const result = await signInWithPopup(auth, provider);\r\n        if (result?.user) await this.handleGoogleSuccess(result.user);\r\n      } catch (error) {\r\n        if (error.code === 'auth/popup-blocked') {\r\n          await signInWithRedirect(auth, provider);\r\n        } else if (error.code !== 'auth/popup-closed-by-user') {\r\n          console.error('Google sign-in error:', error);\r\n          alert('Failed to connect Google account.');\r\n        }\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}