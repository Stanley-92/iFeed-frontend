{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { Icon } from '@iconify/vue';\nimport { auth } from '@/firebase';\nimport { createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, signInWithRedirect, getRedirectResult } from 'firebase/auth';\nexport default {\n  name: 'CreateAccount',\n  components: {\n    Icon\n  },\n  data() {\n    return {\n      form: {\n        firstName: '',\n        lastName: '',\n        dobDay: '',\n        dobMonth: '',\n        dobYear: '',\n        gender: '',\n        contact: '',\n        // email\n        password: ''\n      },\n      errors: {\n        name: '',\n        dob: '',\n        gender: '',\n        contact: '',\n        password: ''\n      },\n      isLoading: false,\n      years: Array.from({\n        length: 100\n      }, (_, i) => new Date().getFullYear() - i)\n    };\n  },\n  computed: {\n    apiBase() {\n      return import.meta.env.VITE_API_URL || 'http://localhost:3000';\n    }\n  },\n  // Handle user coming back from Google redirect\n\n  async mounted() {\n    try {\n      const result = await getRedirectResult(auth);\n      if (result && result.user) {\n        console.log('Google redirect user:', result.user);\n        await this.handleGoogleSuccess(result.user);\n      }\n    } catch (error) {\n      console.error('Google redirect error:', error);\n    }\n  },\n  methods: {\n    goToMainfeed() {\n      this.$router.push('/');\n    },\n    // Shared logic for successful Google sign-in\n    async handleGoogleSuccess(user) {\n      const uid = user.uid;\n      let firstName = '';\n      let lastName = '';\n      if (user.displayName) {\n        const parts = user.displayName.trim().split(' ');\n        firstName = parts[0];\n        lastName = parts.slice(1).join(' ') || '';\n      }\n      const profileData = {\n        uid,\n        email: user.email,\n        firstName,\n        lastName,\n        fullName: user.displayName || '',\n        photoURL: user.photoURL || '',\n        dateOfBirth: '',\n        gender: '',\n        createdAt: new Date().toISOString(),\n        emailVerified: user.emailVerified,\n        provider: 'google'\n      };\n\n      // Safe backend save non-blocking)\n      try {\n        const response = await fetch(`${this.apiBase}/api/users/create-profile`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(profileData)\n        });\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          console.warn('Profile save failed:', errorData.message || response.status);\n        } else {\n          console.log('Profile saved successfully');\n        }\n      } catch (fetchError) {\n        console.warn('Backend unreachable (non-critical):', fetchError.message);\n      }\n\n      // Always store and redirect\n      localStorage.setItem('userUid', uid);\n      localStorage.setItem('userEmail', user.email);\n      localStorage.setItem('userDisplayName', user.displayName || '');\n      localStorage.setItem('userPhotoURL', user.photoURL || '');\n      console.log('Redirecting to ProfileUser...');\n      this.$router.push({\n        name: 'ProfileUser'\n      });\n    },\n    async handleSubmit() {\n      this.errors = {\n        name: '',\n        dob: '',\n        gender: '',\n        contact: '',\n        password: ''\n      };\n\n      // Validation (same as before)\n      if (!this.form.firstName.trim() || !this.form.lastName.trim()) {\n        this.errors.name = 'First and last name are required.';\n      }\n      if (!this.form.dobDay || !this.form.dobMonth || !this.form.dobYear) {\n        this.errors.dob = 'Please select your full date of birth.';\n      }\n      if (!this.form.gender) {\n        this.errors.gender = 'Please select your gender.';\n      }\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!this.form.contact || !emailRegex.test(this.form.contact)) {\n        this.errors.contact = 'Please enter a valid email address.';\n      }\n      if (!this.form.password || this.form.password.length < 6) {\n        this.errors.password = 'Password must be at least 6 characters.';\n      }\n      if (Object.values(this.errors).some(err => err)) return;\n      this.isLoading = true;\n      try {\n        const userCredential = await createUserWithEmailAndPassword(auth, this.form.contact, this.form.password);\n        const user = userCredential.user;\n        const uid = user.uid;\n        const profileData = {\n          uid,\n          email: this.form.contact,\n          firstName: this.form.firstName.trim(),\n          lastName: this.form.lastName.trim(),\n          fullName: `${this.form.firstName.trim()} ${this.form.lastName.trim()}`,\n          dateOfBirth: `${this.form.dobYear}-${this.form.dobMonth}-${this.form.dobDay}`,\n          gender: this.form.gender,\n          createdAt: new Date().toISOString(),\n          emailVerified: false,\n          provider: 'email'\n        };\n\n        // Safe backend save\n        try {\n          const response = await fetch(`${this.apiBase}/api/users/create-profile`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(profileData)\n          });\n          if (!response.ok) {\n            console.warn('Profile save failed (email signup):', await response.text());\n          }\n        } catch (e) {\n          console.warn('Backend unreachable:', e.message);\n        }\n        localStorage.setItem('userUid', uid);\n        localStorage.setItem('userEmail', this.form.contact);\n        localStorage.setItem('userDisplayName', user.displayName || '');\n        localStorage.setItem('userPhotoURL', user.photoURL || '');\n        this.$router.push({\n          name: 'ProfileUser'\n        });\n      } catch (error) {\n        console.error('Signup error:', error);\n        if (error.code === 'auth/email-already-in-use') {\n          this.errors.contact = 'This email is already registered.';\n        } else if (error.code === 'auth/weak-password') {\n          this.errors.password = 'Password is too weak.';\n        } else {\n          this.errors.contact = error.message || 'Signup failed. Please try again.';\n        }\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async signInWithGoogle() {\n      this.isLoading = true;\n      const provider = new GoogleAuthProvider();\n      try {\n        // Try popup first (best UX)\n        const result = await signInWithPopup(auth, provider);\n        await this.handleGoogleSuccess(result.user);\n      } catch (error) {\n        // If popup fails (blocked, network, etc.), fall back to redirect\n        if (error.code === 'auth/popup-blocked' || error.code === 'auth/popup-closed-by-user' || error.code === 'auth/network-request-failed' || error.code === 'auth/cancelled-popup-request') {\n          console.log('Popup failed → switching to redirect');\n          try {\n            await signInWithRedirect(auth, provider);\n            // Redirect happens → handled in mounted()\n          } catch (redirectError) {\n            console.error('Redirect also failed:', redirectError);\n            this.errors.contact = 'Google sign-in failed. Try again or use email signup.';\n          }\n        } else {\n          console.error('Google sign-in error:', error.code, error.message);\n          this.errors.contact = 'Google sign-in failed. Please try again.';\n        }\n      } finally {\n        this.isLoading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["Icon","auth","createUserWithEmailAndPassword","GoogleAuthProvider","signInWithPopup","signInWithRedirect","getRedirectResult","name","components","data","form","firstName","lastName","dobDay","dobMonth","dobYear","gender","contact","password","errors","dob","isLoading","years","Array","from","length","_","i","Date","getFullYear","computed","apiBase","import","meta","env","VITE_API_URL","mounted","result","user","console","log","handleGoogleSuccess","error","methods","goToMainfeed","$router","push","uid","displayName","parts","trim","split","slice","join","profileData","email","fullName","photoURL","dateOfBirth","createdAt","toISOString","emailVerified","provider","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","catch","warn","message","status","fetchError","localStorage","setItem","handleSubmit","emailRegex","test","Object","values","some","err","userCredential","text","e","code","signInWithGoogle","redirectError"],"sources":["D:\\login-feed\\src\\components\\CreateAccount.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-100 flex flex-col items-center justify-center \">\r\n\r\n  \r\n<div class=\"w-full max-w-md bg-white p-8 rounded-md    \r\n    bg-gray p-8 rounded-xl shadow-md\r\n     w-full max-w-sm border-2 mb-50\r\n     shadow-md text-center border \">\r\n     <!---Box Create Acc-->\r\n\r\n      <!-- Back to Main Feed Button (optional) -->\r\n   \r\n<div class=\" w-65 hidden md:block max-w-full\">\r\n<button class=\" flex-1 items-center pl-3 cursor-pointer \">\r\n<Icon icon=\"tdesign:chat-bubble\" \r\nclass=\"w-14 h-14 text-white transition-colors bg-green-500\r\n border-4 border-green-500 rounded-xl duration-200 hover:text-gray-600 mb-10\" \r\n\r\n @click=\"goToMainfeed\"/>\r\n</button>\r\n\r\n<!-- Connect with Gmail-->\r\n<div class=\"flex justify-center\">\r\n  <button @click=\"signInWithGoogle\"\r\n    class=\"relative flex items-center justify-center gap-4 px-4 \r\n    py-2 mb-2 text-base font-medium text-gray-700 bg-gray-200 border-2 \r\n    border-gray-300 rounded-full  shadow-sm hover:shadow-md \r\n    hover:border-gray-400 focus:outline-none focus:ring-2 \r\n    focus:ring-offset-2 focus:ring-blue-500 transition-shadow\">\r\n    <Icon icon=\"flat-color-icons:google\" class=\"w-6 h-6\" />\r\n    <span>Connect with Google</span>\r\n  </button>\r\n</div>\r\n<!----->\r\n      </div>\r\n\r\n      <h2 class=\"text-2xl font-bold text-gray-800 mb-8 text-center\">Create a new account</h2>\r\n\r\n      <!-- First + Last Name -->\r\n      <div class=\"flex gap-3 mb-3\">\r\n        <input v-model.trim=\"form.firstName\" type=\"text\" placeholder=\"First name\"\r\n          class=\"w-1/2 px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 transition text-sm\" />\r\n        <input v-model.trim=\"form.lastName\" type=\"text\" placeholder=\"Last name\"\r\n          class=\"w-1/2 px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 transition text-sm\" />\r\n      </div>\r\n      <p v-if=\"errors.name\" class=\"text-red-500 text-xs mb-3 -mt-2\">{{ errors.name }}</p>\r\n\r\n      <!-- Date of Birth -->\r\n      <div class=\"text-left text-sm font-medium text-gray-600 mb-2\">Date of Birth</div>\r\n      <div class=\"flex gap-3 mb-3\">\r\n        <select v-model=\"form.dobDay\"\r\n          class=\"w-1/3 px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 text-sm\">\r\n          <option value=\"\" disabled>Day</option>\r\n          <option v-for=\"d in 31\" :key=\"d\" :value=\"String(d).padStart(2, '0')\">{{ d }}</option>\r\n        </select>\r\n        <select v-model=\"form.dobMonth\"\r\n          class=\"w-1/3 px-4 py-2 border-2 border-gray-300 \r\n          rounded-lg focus:outline-none focus:border-blue-500 text-sm\">\r\n          <option value=\"\" disabled>Month</option>\r\n          <option v-for=\"m in 12\" :key=\"m\" :value=\"String(m).padStart(2, '0')\">{{ m }}</option>\r\n        </select>\r\n        <select v-model=\"form.dobYear\"\r\n          class=\"w-1/3 px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 text-sm\">\r\n          <option value=\"\" disabled>Year</option>\r\n          <option v-for=\"y in years\" :key=\"y\" :value=\"y\">{{ y }}</option>\r\n        </select>\r\n      </div>\r\n      <p v-if=\"errors.dob\" class=\"text-red-500 text-xs mb-3 -mt-2\">{{ errors.dob }}</p>\r\n\r\n      <!-- Gender -->\r\n      <div class=\"text-left text-sm font-medium text-gray-600 mb-2\">Gender</div>\r\n      <div class=\"flex gap-3 mb-3\">\r\n        <button v-for=\"g in ['Female', 'Male', 'Other']\" :key=\"g\" @click=\"form.gender = g\"\r\n          :class=\"[\r\n            'flex-1 py-2 px-4 rounded-lg border-2 text-sm font-medium transition',\r\n            form.gender === g\r\n              ? 'border-green-500 bg-green-50 text-green-700'\r\n              : 'border-gray-300 hover:border-gray-400'\r\n          ]\">\r\n          {{ g }}\r\n        </button>\r\n      </div>\r\n      <p v-if=\"errors.gender\" class=\"text-red-500 text-xs mb-3 -mt-2\">{{ errors.gender }}</p>\r\n\r\n      <!-- Email -->\r\n      <input v-model.trim=\"form.contact\" type=\"text\" placeholder=\"Email address\"\r\n        class=\"w-full px-2 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 mb-3 text-sm\" />\r\n      <p v-if=\"errors.contact\" class=\"text-red-500 text-xs mb-3 -mt-2\">{{ errors.contact }}</p>\r\n\r\n      <!-- Password -->\r\n      <input v-model=\"form.password\" type=\"password\" placeholder=\"Create password \"\r\n        class=\"w-full px-2 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 mb-4 text-sm\" />\r\n      <p v-if=\"errors.password\" class=\"text-red-500 text-xs mb-4 -mt-3\">{{ errors.password }}</p>\r\n\r\n      <!-- Submit Button with Loading -->\r\n      <button @click=\"handleSubmit\" :disabled=\"isLoading\"\r\n        class=\"w-full py-2 bg-blue-600 text-white font-semibold \r\n        text-sm rounded-xl hover:bg-blue-400 disabled:bg-blue-400 \r\n        disabled:cursor-not-allowed transition flex items-center justify-center\">\r\n        <span v-if=\"isLoading\">Creating Account...</span>\r\n        <span v-else>Create Your Account</span>\r\n      </button>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n\r\n<script>\r\nimport { Icon } from '@iconify/vue';\r\nimport { auth } from '@/firebase';\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  GoogleAuthProvider,\r\n  signInWithPopup,\r\n  signInWithRedirect,\r\n  getRedirectResult\r\n} from 'firebase/auth';\r\n\r\nexport default {\r\n  name: 'CreateAccount',\r\n  components: { Icon },\r\n\r\n  data() {\r\n    return {\r\n      form: {\r\n        firstName: '',\r\n        lastName: '',\r\n        dobDay: '',\r\n        dobMonth: '',\r\n        dobYear: '',\r\n        gender: '',\r\n        contact: '', // email\r\n        password: ''\r\n      },\r\n      errors: {\r\n        name: '',\r\n        dob: '',\r\n        gender: '',\r\n        contact: '',\r\n        password: ''\r\n      },\r\n      isLoading: false,\r\n      years: Array.from({ length: 100 }, (_, i) => new Date().getFullYear() - i)\r\n    };\r\n  },\r\n\r\n\r\n\r\n  computed: {\r\n    apiBase() {\r\n      return import.meta.env.VITE_API_URL || 'http://localhost:3000';\r\n    }\r\n  },\r\n\r\n  // Handle user coming back from Google redirect\r\n\r\n async mounted() {\r\n  try {\r\n    const result = await getRedirectResult(auth);\r\n\r\n    if (result && result.user) {\r\n      console.log('Google redirect user:', result.user);\r\n      await this.handleGoogleSuccess(result.user);\r\n    }\r\n  } catch (error) {\r\n    console.error('Google redirect error:', error);\r\n  }\r\n},\r\n\r\n  methods: {\r\n    goToMainfeed() {\r\n      this.$router.push('/');\r\n    },\r\n\r\n    // Shared logic for successful Google sign-in\r\n    async handleGoogleSuccess(user) {\r\n      const uid = user.uid;\r\n\r\n      let firstName = '';\r\n      let lastName = '';\r\n      if (user.displayName) {\r\n        const parts = user.displayName.trim().split(' ');\r\n        firstName = parts[0];\r\n        lastName = parts.slice(1).join(' ') || '';\r\n      }\r\n\r\n      const profileData = {\r\n        uid,\r\n        email: user.email,\r\n        firstName,\r\n        lastName,\r\n        fullName: user.displayName || '',\r\n        photoURL: user.photoURL || '',\r\n        dateOfBirth: '',\r\n        gender: '',\r\n        createdAt: new Date().toISOString(),\r\n        emailVerified: user.emailVerified,\r\n        provider: 'google'\r\n      };\r\n\r\n      // Safe backend save non-blocking)\r\n      try {\r\n        const response = \r\n        \r\n        await fetch(`${this.apiBase}/api/users/create-profile`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(profileData)\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const errorData = await response.json().catch(() => ({}));\r\n          console.warn('Profile save failed:', errorData.message || response.status);\r\n        } else {\r\n          console.log('Profile saved successfully');\r\n        }\r\n      } catch (fetchError) {\r\n        console.warn('Backend unreachable (non-critical):', fetchError.message);\r\n      }\r\n\r\n      // Always store and redirect\r\n      localStorage.setItem('userUid', uid);\r\n      localStorage.setItem('userEmail', user.email);\r\n      localStorage.setItem('userDisplayName', user.displayName || '');\r\n      localStorage.setItem('userPhotoURL', user.photoURL || '');\r\n\r\n      console.log('Redirecting to ProfileUser...');\r\n      this.$router.push({ name: 'ProfileUser' });\r\n    },\r\n\r\n    async handleSubmit() {\r\n      this.errors = { name: '', dob: '', gender: '', contact: '', password: '' };\r\n\r\n      // Validation (same as before)\r\n      if (!this.form.firstName.trim() || !this.form.lastName.trim()) {\r\n        this.errors.name = 'First and last name are required.';\r\n      }\r\n      if (!this.form.dobDay || !this.form.dobMonth || !this.form.dobYear) {\r\n        this.errors.dob = 'Please select your full date of birth.';\r\n      }\r\n      if (!this.form.gender) {\r\n        this.errors.gender = 'Please select your gender.';\r\n      }\r\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n      if (!this.form.contact || !emailRegex.test(this.form.contact)) {\r\n        this.errors.contact = 'Please enter a valid email address.';\r\n      }\r\n      if (!this.form.password || this.form.password.length < 6) {\r\n        this.errors.password = 'Password must be at least 6 characters.';\r\n      }\r\n      if (Object.values(this.errors).some(err => err)) return;\r\n\r\n      this.isLoading = true;\r\n\r\n      try {\r\n        const userCredential = await createUserWithEmailAndPassword(\r\n          auth,\r\n          this.form.contact,\r\n          this.form.password\r\n        );\r\n        const user = userCredential.user;\r\n        const uid = user.uid;\r\n\r\n        const profileData = {\r\n          uid,\r\n          email: this.form.contact,\r\n          firstName: this.form.firstName.trim(),\r\n          lastName: this.form.lastName.trim(),\r\n          fullName: `${this.form.firstName.trim()} ${this.form.lastName.trim()}`,\r\n          dateOfBirth: `${this.form.dobYear}-${this.form.dobMonth}-${this.form.dobDay}`,\r\n          gender: this.form.gender,\r\n          createdAt: new Date().toISOString(),\r\n          emailVerified: false,\r\n          provider: 'email'\r\n        };\r\n\r\n        // Safe backend save\r\n        try {\r\n          const response = await fetch(`${this.apiBase}/api/users/create-profile`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(profileData)\r\n          });\r\n          if (!response.ok) {\r\n            console.warn('Profile save failed (email signup):', await response.text());\r\n          }\r\n        } catch (e) {\r\n          console.warn('Backend unreachable:', e.message);\r\n        }\r\n\r\n        localStorage.setItem('userUid', uid);\r\n        localStorage.setItem('userEmail', this.form.contact);\r\n        localStorage.setItem('userDisplayName', user.displayName || '');\r\n        localStorage.setItem('userPhotoURL', user.photoURL || '');\r\n\r\n        this.$router.push({ name: 'ProfileUser' });\r\n\r\n      } catch (error) {\r\n        console.error('Signup error:', error);\r\n        if (error.code === 'auth/email-already-in-use') {\r\n          this.errors.contact = 'This email is already registered.';\r\n        } else if (error.code === 'auth/weak-password') {\r\n          this.errors.password = 'Password is too weak.';\r\n        } else {\r\n          this.errors.contact = error.message || 'Signup failed. Please try again.';\r\n        }\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n\r\n    async signInWithGoogle() {\r\n      this.isLoading = true;\r\n      const provider = new GoogleAuthProvider();\r\n\r\n      try {\r\n        // Try popup first (best UX)\r\n        const result = await signInWithPopup(auth, provider);\r\n        await this.handleGoogleSuccess(result.user);\r\n\r\n      } catch (error) {\r\n        // If popup fails (blocked, network, etc.), fall back to redirect\r\n        if (\r\n          error.code === 'auth/popup-blocked' ||\r\n          error.code === 'auth/popup-closed-by-user' ||\r\n          error.code === 'auth/network-request-failed' ||\r\n          error.code === 'auth/cancelled-popup-request'\r\n        ) {\r\n          console.log('Popup failed → switching to redirect');\r\n          try {\r\n\r\n\r\n            await signInWithRedirect(auth, provider);\r\n            // Redirect happens → handled in mounted()\r\n          } catch (redirectError) {\r\n            console.error('Redirect also failed:', redirectError);\r\n            this.errors.contact = 'Google sign-in failed. Try again or use email signup.';\r\n          }\r\n        } else {\r\n          console.error('Google sign-in error:', error.code, error.message);\r\n          this.errors.contact = 'Google sign-in failed. Please try again.';\r\n        }\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n/* Optional: Add any custom styles here */\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}