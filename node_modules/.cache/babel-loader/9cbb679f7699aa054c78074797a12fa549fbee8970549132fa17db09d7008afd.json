{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, resolveDynamicComponent as _resolveDynamicComponent, mergeProps as _mergeProps, createBlock as _createBlock, withModifiers as _withModifiers, withKeys as _withKeys, renderSlot as _renderSlot } from \"vue\";\nconst _hoisted_1 = {\n  class: \"fixed top-0 right-0 h-full w-[400px] bg-white shadow-xl border-l border-gray-200 z-[9999] flex flex-col\"\n};\nconst _hoisted_2 = {\n  class: \"flex justify-between items-center p-4 border-b\"\n};\nconst _hoisted_3 = {\n  class: \"flex items-center gap-5 mb-5 px-5\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  class: \"font-semibold text-sm\"\n};\nconst _hoisted_6 = {\n  class: \"text-xs text-gray-400\"\n};\nconst _hoisted_7 = {\n  class: \"relative mb-5 px-5\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"space-y-3 overflow-y-auto px-4\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n  class: \"flex items-center gap-2\"\n};\nconst _hoisted_11 = [\"src\"];\nconst _hoisted_12 = {\n  class: \"text-sm font-medium text-blue-700\"\n};\nconst _hoisted_13 = {\n  class: \"text-xs text-gray-500\"\n};\nconst _hoisted_14 = {\n  class: \"flex flex-col flex-1 overflow-hidden\"\n};\nconst _hoisted_15 = {\n  class: \"border-b px-6 py-4 bg-white flex items-center justify-between\"\n};\nconst _hoisted_16 = {\n  class: \"flex items-center gap-3\"\n};\nconst _hoisted_17 = [\"src\"];\nconst _hoisted_18 = {\n  class: \"font-semibold\"\n};\nconst _hoisted_19 = {\n  class: \"text-xs text-green-500\"\n};\nconst _hoisted_20 = {\n  class: \"flex flex flex-col h-full overflow-hidden\"\n};\nconst _hoisted_21 = {\n  class: \"flex-1 overflow-y-auto px-4 py-4 space-y-4 gap-2\"\n};\nconst _hoisted_22 = [\"src\"];\nconst _hoisted_23 = {\n  key: 0,\n  class: \"flex items-center gap-2 bg-gray-100 px-3 py-2 rounded-lg\"\n};\nconst _hoisted_24 = {\n  target: \"_blank\",\n  class: \"text-sm font-medium text-blue-700 underline\"\n};\nconst _hoisted_25 = [\"onTouchend\"];\nconst _hoisted_26 = [\"src\"];\nconst _hoisted_27 = {\n  key: 0,\n  class: \"text-sm whitespace-pre-wrap break-all\"\n};\nconst _hoisted_28 = [\"src\", \"onClick\"];\nconst _hoisted_29 = [\"src\", \"onClick\"];\nconst _hoisted_30 = {\n  key: 5,\n  class: \"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50\"\n};\nconst _hoisted_31 = {\n  class: \"relative\"\n};\nconst _hoisted_32 = [\"onClick\"];\nconst _hoisted_33 = [\"onClick\"];\nconst _hoisted_34 = {\n  key: 6,\n  class: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\n};\nconst _hoisted_35 = {\n  class: \"bg-white rounded-xl p-4 w-80 shadow-lg\"\n};\nconst _hoisted_36 = {\n  class: \"space-y-2\"\n};\nconst _hoisted_37 = [\"onClick\"];\nconst _hoisted_38 = {\n  class: \"text-[11px] text-right opacity-70 mt-1\"\n};\nconst _hoisted_39 = {\n  class: \"px-2 py-3 bg-white flex items-center gap-2\"\n};\nconst _hoisted_40 = {\n  class: \"flex items-center flex-1 bg-white border border-gray-400 rounded-full px-3 py-2 shadow-sm gap-2\"\n};\nconst _hoisted_41 = [\"title\"];\nconst _hoisted_42 = [\"onKeydown\"];\nconst _hoisted_43 = {\n  class: \"cursor-pointer\"\n};\nconst _hoisted_44 = {\n  class: \"bg-white p-3 rounded-xl shadow-lg border w-80 max-h-[80vh] overflow-y-auto\"\n};\nconst _hoisted_45 = {\n  key: 0,\n  class: \"fixed bottom-24 left-1/2 -translate-x-1/2 z-50 bg-blue-600 rounded-full px-6 py-2 shadow-lg flex items-center justify-between gap-4 h-12 w-[360px] max-w-[90vw]\"\n};\nconst _hoisted_46 = {\n  class: \"flex items-end gap-[2px] flex-1\"\n};\nconst _hoisted_47 = {\n  class: \"flex flex-col min-w-[60px]\"\n};\nconst _hoisted_48 = {\n  class: \"text-xs font-mono\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Header \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit('close')),\n    class: \"text-gray-400 hover:text-black\"\n  }, \"close\")]), _createCommentVNode(\" Current User \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n    src: $setup.currentUser.avatar,\n    class: \"w-10 h-10 rounded-full border-2 border-purple-600\"\n  }, null, 8 /* PROPS */, _hoisted_4), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", _hoisted_5, _toDisplayString($setup.currentUser.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, _toDisplayString($setup.currentUser.role), 1 /* TEXT */)])]), _createCommentVNode(\" Search Bar \"), _createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.searchQuery = $event),\n    type: \"text\",\n    placeholder: \"Search Friend...\",\n    class: \"w-full border border-gray-300 rounded-full px-4 py-2 pl-10 text-sm focus:outline-none focus:ring-1\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.searchQuery]]), _createVNode($setup[\"Icon\"], {\n    icon: \"mdi:magnify\",\n    class: \"absolute left-7 top-2.5 text-gray-400 w-4 h-4\"\n  })]), _createCommentVNode(\" FRIEND LIST or CHAT THREAD VIEW \"), !$setup.chatStarted ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredFriends, friend => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: friend.id,\n      class: \"flex items-center justify-between hover:bg-gray-50 px-2 py-1 rounded cursor-pointer\",\n      onClick: $event => $setup.selectFriend(friend)\n    }, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"img\", {\n      src: friend.avatar,\n      class: \"w-8 h-8 rounded-full border-2 border-purple-600\"\n    }, null, 8 /* PROPS */, _hoisted_11), _createElementVNode(\"span\", _hoisted_12, _toDisplayString(friend.name), 1 /* TEXT */)]), _createElementVNode(\"span\", _hoisted_13, _toDisplayString($setup.friends.time), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_9);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" CHAT THREAD VIEW \"), _createElementVNode(\"div\", _hoisted_14, [_createCommentVNode(\" Chat Header \"), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"img\", {\n    src: $setup.selectedUser.avatar,\n    class: \"w-10 h-10 rounded-full\"\n  }, null, 8 /* PROPS */, _hoisted_17), _createElementVNode(\"div\", null, [_createElementVNode(\"h2\", _hoisted_18, _toDisplayString($setup.selectedUser.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_19, _toDisplayString($setup.selectedUser.status || 'online'), 1 /* TEXT */)])]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = $event => $setup.chatStarted = false),\n    class: \"text-gray-400 hover:text-black\"\n  }, [_createVNode($setup[\"Icon\"], {\n    icon: \"ci:chevron-left\"\n  })]), _createElementVNode(\"button\", null, [_createVNode($setup[\"Icon\"], {\n    icon: \"material-symbols:zoom-out-map-rounded\"\n  })])]), _createCommentVNode(\" Message + Input \"), _createElementVNode(\"div\", _hoisted_20, [_createCommentVNode(\" Messages Wrap Here \"), _createElementVNode(\"div\", _hoisted_21, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.messages, (msg, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: _normalizeClass([\"flex items-end gap-1\", msg.from === 'me' ? 'justify-end' : 'justify-start'])\n    }, [_createCommentVNode(\" Avatar \"), _createElementVNode(\"img\", {\n      src: msg.avatar,\n      class: _normalizeClass([\"w-8 h-8 rounded-full gap-1\", msg.from === 'me' ? 'order-2' : 'order-1'])\n    }, null, 10 /* CLASS, PROPS */, _hoisted_22), _createCommentVNode(\" Message Bubble \"), _createElementVNode(\"div\", {\n      class: _normalizeClass([\"max-w-[70%] flex flex-col gap-1\", msg.from === 'me' ? 'items-end order-1' : 'items-start order-2'])\n    }, [_createCommentVNode(\" File Message \"), msg.file ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [_createVNode($setup[\"Icon\"], {\n      icon: \"iconamoon:file-document-thin\",\n      class: \"text-blue-600 w-5 h-5\"\n    }), _createElementVNode(\"a\", _hoisted_24, _toDisplayString(msg.file.name), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Audio Message \"), msg.audio ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 1,\n      class: _normalizeClass([\"flex flex-col transition-transform duration-200 max-w-[70%]\", msg.from === 'me' ? ' items-end self-end' : 'items-start self-start ']),\n      style: _normalizeStyle({\n        transform: $setup.swipeTranslateX(index)\n      }),\n      onTouchstart: $setup.onTouchStart,\n      onTouchmove: $setup.onTouchMove,\n      onTouchend: $event => $setup.onTouchEnd(index)\n    }, [_createCommentVNode(\" Audio Bubble Container \"), _createElementVNode(\"div\", {\n      class: _normalizeClass([\"rounded-2xl px-3 py-2 flex flex-col gap-2\", msg.from === 'me' ? 'text-white' : 'text-white'])\n    }, [_createElementVNode(\"audio\", {\n      src: msg.audio,\n      controls: \"\",\n      class: \"w-56\"\n    }, null, 8 /* PROPS */, _hoisted_26), _createCommentVNode(\" Optional text below audio \"), msg.text ? (_openBlock(), _createElementBlock(\"p\", _hoisted_27, _toDisplayString(msg.text), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */)], 46 /* CLASS, STYLE, PROPS, NEED_HYDRATION */, _hoisted_25)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Image message \"), msg.image ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 2,\n      src: msg.image,\n      class: \"w-48 max-h-64 object-cover rounded-xl shadow-md cursor-pointer hover:opacity-90 transition\",\n      onClick: $event => $setup.openMediaPreview(msg.image)\n    }, null, 8 /* PROPS */, _hoisted_28)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Video message \"), msg.video ? (_openBlock(), _createElementBlock(\"video\", {\n      key: 3,\n      src: msg.video,\n      class: \"w-48 max-h-64 object-cover rounded-xl shadow-md cursor-pointer hover:opacity-90 transition gap-1\",\n      controls: \"\",\n      onClick: $event => $setup.openMediaPreview(msg.video)\n    }, null, 8 /* PROPS */, _hoisted_29)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Text Message \"), !msg.audio && !msg.file && !msg.image && !msg.video ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 4,\n      class: _normalizeClass([\"px-4 py-2 rounded-2xl text-sm whitespace-pre-wrap break-all\", msg.from === 'me' ? 'bg-blue-500 text-white' : 'bg-green-500 text-white'])\n    }, _toDisplayString(msg.text), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Media Preview Modal \"), $setup.mediaPreview ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [_createElementVNode(\"div\", _hoisted_31, [(_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.previewType === 'video' ? 'video' : 'img'), _mergeProps({\n      src: $setup.mediaPreview,\n      class: \"max-w-[90vw] max-h-[85vh] rounded-lg shadow-xl\"\n    }, {\n      ref_for: true\n    }, _ctx.previewType === 'video' ? {\n      controls: true\n    } : {}), null, 16 /* FULL_PROPS */, [\"src\"])), _createElementVNode(\"button\", {\n      onClick: _cache[3] || (_cache[3] = $event => $setup.mediaPreview = null),\n      class: \"absolute top-2 right-2 bg-black bg-opacity-50 p-2 rounded-full text-white hover:bg-opacity-70\",\n      title: \"Close\"\n    }, [_createVNode($setup[\"Icon\"], {\n      icon: \"ic:round-close\",\n      class: \"w-6 h-6\"\n    })])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Delete Button (Visible on Hover) \"), _createElementVNode(\"button\", {\n      class: \"absolute top-1 right-1 text-white text-xs bg-black bg-opacity-50 p-1 rounded-full hidden group-hover:block\",\n      onClick: $event => $setup.deleteMessage(index),\n      title: \"Delete\"\n    }, null, 8 /* PROPS */, _hoisted_32), _createCommentVNode(\" Forward Button \"), _createElementVNode(\"button\", {\n      class: \"absolute bottom-1 right-8 text-xs text-white bg-blue-500 hover:bg-blue-600 rounded-full p-1 hidden group-hover:block\",\n      onClick: $event => $setup.forwardMessage(msg),\n      title: \"Forward\"\n    }, null, 8 /* PROPS */, _hoisted_33), _createCommentVNode(\" Forward Modal \"), $setup.forwardingMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [_createElementVNode(\"div\", _hoisted_35, [_cache[7] || (_cache[7] = _createElementVNode(\"h2\", {\n      class: \"text-lg font-semibold mb-3\"\n    }, \"Forward to:\", -1 /* CACHED */)), _createElementVNode(\"ul\", _hoisted_36, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.friends, friend => {\n      return _createElementVNode(\"li\", {\n        key: friend.id,\n        class: \"cursor-pointer hover:bg-gray-100 px-3 py-2 rounded\",\n        onClick: $event => $setup.sendForwardTo(friend)\n      }, _toDisplayString(friend.name), 9 /* TEXT, PROPS */, _hoisted_37);\n    }), 64 /* STABLE_FRAGMENT */))]), _createElementVNode(\"button\", {\n      class: \"mt-4 text-sm text-red-500\",\n      onClick: _cache[4] || (_cache[4] = $event => $setup.forwardingMessage = null)\n    }, \"Cancel\")])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\"Time Stamp\"), _createElementVNode(\"p\", _hoisted_38, _toDisplayString(msg.time), 1 /* TEXT */)], 2 /* CLASS */)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" Input Area \"), _createElementVNode(\"div\", _hoisted_39, [_createCommentVNode(\" Outer rounded box containing textarea + icons \"), _createElementVNode(\"div\", _hoisted_40, [_createCommentVNode(\" Mic \"), _createElementVNode(\"button\", {\n    onClick: $setup.toggleRecording,\n    class: \"text-gray-500 hover:text-red-500 transition\",\n    title: $setup.isRecording ? 'Stop recording' : 'Start recording'\n  }, [_createVNode($setup[\"Icon\"], {\n    icon: $setup.isRecording ? 'mdi:stop-circle-outline' : 'material-symbols:mic',\n    class: \"w-5 h-5\"\n  }, null, 8 /* PROPS */, [\"icon\"])], 8 /* PROPS */, _hoisted_41), _createCommentVNode(\" Textarea \"), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.newMessage = $event),\n    placeholder: \"Write something...\",\n    class: \"flex-1 bg-transparent text-sm text-black resize-none overflow-y-auto leading-snug align-top max-h-40 outline-none\",\n    rows: \"1\",\n    onInput: $setup.autoResize,\n    onKeydown: _withKeys(_withModifiers($setup.sendMessage, [\"prevent\"]), [\"enter\"])\n  }, \"  \", 40 /* PROPS, NEED_HYDRATION */, _hoisted_42), [[_vModelText, $setup.newMessage]]), _createCommentVNode(\" Photo/Video \"), _createElementVNode(\"label\", _hoisted_43, [_createVNode($setup[\"Icon\"], {\n    icon: \"tabler:photo\",\n    class: \"w-5 h-5 text-gray-500 hover:text-green-500\"\n  }), _createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \"image/*,video/*\",\n    multiple: \"\",\n    hidden: \"\",\n    onChange: $setup.handleMediaUpload\n  }, null, 32 /* NEED_HYDRATION */)]), _createCommentVNode(\" Emoji \"), _createElementVNode(\"button\", {\n    onClick: $setup.toggleEmojiPicker,\n    title: \"Insert Emoji\"\n  }, [_createVNode($setup[\"Icon\"], {\n    icon: \"fa-regular:smile\",\n    class: \"w-5 h-5 text-gray-500 hover:text-yellow-500\"\n  })]), _createCommentVNode(\" File Attach \"), _createElementVNode(\"button\", {\n    onClick: $setup.triggerFileInput,\n    title: \"Attach File\",\n    class: \"text-gray-500 hover:text-gray-800\"\n  }, [_createVNode($setup[\"Icon\"], {\n    icon: \"tdesign:attach\",\n    class: \"w-5 h-5\"\n  })]), _createElementVNode(\"input\", {\n    ref: \"fileInput\",\n    type: \"file\",\n    accept: \".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.zip,.rar\",\n    hidden: \"\",\n    onChange: $setup.handleFileUpload\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), _createCommentVNode(\" Send \"), _createElementVNode(\"button\", {\n    onClick: $setup.sendMessage,\n    class: \"text-blue-500 hover:text-blue-700\"\n  }, [_createVNode($setup[\"Icon\"], {\n    icon: \"ic:round-send\",\n    class: \"w-5 h-5\"\n  })])])]), _createCommentVNode(\" Emoji Picker Overlay \"), $setup.showEmojiPicker ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"fixed inset-0 flex items-center justify-center z-50\",\n    onClick: _cache[6] || (_cache[6] = _withModifiers($event => $setup.showEmojiPicker = false, [\"self\"]))\n  }, [_createElementVNode(\"div\", _hoisted_44, [_createVNode($setup[\"EmojiPicker\"], {\n    onSelect: $setup.addEmoji\n  })]), _createCommentVNode(\" Floating Voice Waveform Bar \"), $setup.isRecording ? (_openBlock(), _createElementBlock(\"div\", _hoisted_45, [_createCommentVNode(\" Animated Bars \"), _createElementVNode(\"div\", _hoisted_46, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.waveformData, (bar, i) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: i,\n      style: _normalizeStyle({\n        height: `${bar}px`\n      }),\n      class: \"w-[2px] bg-white rounded-sm transition-all duration-75\"\n    }, null, 4 /* STYLE */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" Timer Floating \"), _createElementVNode(\"div\", _hoisted_47, [_createElementVNode(\"span\", _hoisted_48, _toDisplayString($setup.recordingTimerDisplay), 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _renderSlot(_ctx.$slots, \"default\", {}, undefined, true)])])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","target","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","onClick","_cache","$event","_ctx","$emit","_hoisted_3","src","$setup","currentUser","avatar","_hoisted_5","_toDisplayString","name","_hoisted_6","role","_hoisted_7","searchQuery","type","placeholder","_createVNode","icon","chatStarted","_hoisted_8","_Fragment","_renderList","filteredFriends","friend","key","id","selectFriend","_hoisted_10","_hoisted_12","_hoisted_13","friends","time","_hoisted_14","_hoisted_15","_hoisted_16","selectedUser","_hoisted_18","_hoisted_19","status","_hoisted_20","_hoisted_21","messages","msg","index","_normalizeClass","from","file","_hoisted_23","_hoisted_24","audio","style","_normalizeStyle","transform","swipeTranslateX","onTouchstart","onTouchStart","onTouchmove","onTouchMove","onTouchend","onTouchEnd","controls","text","_hoisted_27","image","openMediaPreview","video","mediaPreview","_hoisted_30","_hoisted_31","_createBlock","_resolveDynamicComponent","previewType","_mergeProps","title","deleteMessage","forwardMessage","forwardingMessage","_hoisted_34","_hoisted_35","_hoisted_36","sendForwardTo","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","toggleRecording","isRecording","newMessage","rows","onInput","autoResize","onKeydown","_withKeys","_withModifiers","sendMessage","_hoisted_42","_hoisted_43","accept","multiple","hidden","onChange","handleMediaUpload","toggleEmojiPicker","triggerFileInput","ref","handleFileUpload","showEmojiPicker","_hoisted_44","onSelect","addEmoji","_hoisted_45","_hoisted_46","waveformData","bar","i","height","_hoisted_47","_hoisted_48","recordingTimerDisplay","_renderSlot","$slots","undefined"],"sources":["D:\\login-feed\\src\\components\\ChatPanel.vue"],"sourcesContent":["<template>\r\n <div class=\"fixed top-0 right-0 h-full w-[400px] bg-white shadow-xl border-l border-gray-200 z-[9999] flex flex-col\">\r\n    <!-- Header -->\r\n    <div class=\"flex justify-between items-center p-4 border-b\">\r\n    <button @click=\"$emit('close')\" class=\"text-gray-400 hover:text-black\">close</button>\r\n    </div>\r\n\r\n<!-- Current User -->\r\n<div class=\"flex items-center gap-5 mb-5 px-5\">\r\n<img :src=\"currentUser.avatar\" class=\"w-10 h-10 rounded-full border-2 border-purple-600\" />\r\n<div>\r\n <p class=\"font-semibold text-sm\">{{ currentUser.name }}</p>\r\n <p class=\"text-xs text-gray-400\">{{ currentUser.role }}</p>\r\n</div>\r\n</div>\r\n\r\n<!-- Search Bar -->\r\n<div class=\"relative mb-5 px-5\">\r\n<input\r\nv-model=\"searchQuery\"\r\ntype=\"text\"\r\nplaceholder=\"Search Friend...\"\r\nclass=\"w-full border border-gray-300 rounded-full px-4 py-2 pl-10 text-sm focus:outline-none focus:ring-1 \"/>\r\n<Icon icon=\"mdi:magnify\" class=\"absolute left-7 top-2.5 text-gray-400 w-4 h-4\" />\r\n</div>\r\n\r\n<!-- FRIEND LIST or CHAT THREAD VIEW --> \r\n  <div v-if=\"!chatStarted\" class=\"space-y-3 overflow-y-auto px-4\">\r\n  <div\r\n  v-for=\"friend in filteredFriends\"\r\n  :key=\"friend.id\"\r\n  class=\"flex items-center justify-between hover:bg-gray-50 px-2 py-1 rounded cursor-pointer\"\r\n  @click=\"selectFriend(friend)\">\r\n  <div class=\"flex items-center gap-2\">\r\n  <img :src=\"friend.avatar\" class=\"w-8 h-8 rounded-full border-2 border-purple-600\" />\r\n  <span class=\"text-sm font-medium text-blue-700\">{{ friend.name }}</span>\r\n  </div>\r\n  <span class=\"text-xs text-gray-500\">{{ friends.time }}</span>\r\n  </div>\r\n  </div>\r\n\r\n<!-- CHAT THREAD VIEW -->\r\n  <div v-else class=\"flex flex-col flex-1 overflow-hidden\">\r\n  <!-- Chat Header -->\r\n  <div class=\"border-b px-6 py-4 bg-white flex items-center justify-between\">\r\n  <div class=\"flex items-center gap-3\">\r\n  <img :src=\"selectedUser.avatar\" class=\"w-10 h-10 rounded-full\" />\r\n  <div>\r\n  <h2 class=\"font-semibold\">{{ selectedUser.name }}</h2>\r\n <p class=\"text-xs text-green-500\">{{ selectedUser.status ||'online' }}</p>\r\n </div>\r\n </div>\r\n\r\n <button @click=\"chatStarted = false\" class=\"text-gray-400 hover:text-black\">\r\n<Icon icon=\"ci:chevron-left\"/>\r\n</button>\r\n <button>\r\n  <Icon icon=\"material-symbols:zoom-out-map-rounded\"/>\r\n </button>\r\n </div>\r\n\r\n\r\n\r\n\r\n<!-- Message + Input -->\r\n<div class=\"flex flex flex-col h-full overflow-hidden\">\r\n\r\n<!-- Messages Wrap Here -->\r\n<div class=\"flex-1 overflow-y-auto px-4 py-4 space-y-4 gap-2\">\r\n<div\r\nv-for=\"(msg, index) in messages\"\r\n:key=\"index\"\r\nclass=\"flex items-end gap-1\"\r\n:class=\"msg.from === 'me' ? 'justify-end' : 'justify-start'\">\r\n<!-- Avatar -->\r\n   <img\r\n      :src=\"msg.avatar\"\r\n      class=\"w-8 h-8 rounded-full gap-1\"\r\n      :class=\"msg.from === 'me' ? 'order-2' : 'order-1'\"/>\r\n\r\n<!-- Message Bubble -->\r\n<div\r\nclass=\"max-w-[70%] flex flex-col gap-1\"\r\n :class=\"msg.from === 'me' ? 'items-end order-1' : 'items-start order-2'\">\r\n\r\n <!-- File Message -->\r\n <div\r\n v-if=\"msg.file\"\r\n class=\"flex items-center gap-2 bg-gray-100 px-3 py-2 rounded-lg\">\r\n<Icon icon=\"iconamoon:file-document-thin\" class=\"text-blue-600 w-5 h-5\" />\r\n<a\r\n target=\"_blank\"\r\n class=\"text-sm font-medium text-blue-700 underline\">{{ msg.file.name }}\r\n</a>\r\n</div>\r\n\r\n\r\n<!-- Audio Message -->\r\n<div\r\n  v-if=\"msg.audio\"\r\n  class=\"flex flex-col transition-transform duration-200 max-w-[70%] \"\r\n  :style=\"{ transform: swipeTranslateX(index) }\"\r\n  :class=\"msg.from === 'me' ? ' items-end self-end' : 'items-start self-start '\" \r\n  @touchstart=\"onTouchStart\"\r\n  @touchmove=\"onTouchMove\"\r\n  @touchend=\"onTouchEnd(index)\">\r\n\r\n  \r\n  <!-- Audio Bubble Container -->\r\n  <div\r\n    class=\"rounded-2xl px-3 py-2 flex flex-col gap-2\"\r\n    :class=\"msg.from === 'me' ? 'text-white' : 'text-white'\">\r\n    <audio\r\n      :src=\"msg.audio \"\r\n      \r\n      controls\r\n      class=\"w-56 \" >\r\n  </audio>\r\n\r\n    <!-- Optional text below audio -->\r\n    <p v-if=\"msg.text\" class=\"text-sm whitespace-pre-wrap break-all \">\r\n      {{ msg.text }}\r\n    </p>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n<!-- Image message -->\r\n<img\r\n  v-if=\"msg.image\"\r\n  :src=\"msg.image\"\r\n  class=\"w-48 max-h-64 object-cover rounded-xl shadow-md cursor-pointer hover:opacity-90 transition\"\r\n  @click=\"openMediaPreview(msg.image)\"/>\r\n\r\n<!-- Video message -->\r\n<video\r\n  v-if=\"msg.video\"\r\n  :src=\"msg.video\"\r\n  class=\"w-48 max-h-64 object-cover rounded-xl shadow-md cursor-pointer hover:opacity-90 transition gap-1 \"\r\n  controls\r\n  @click=\"openMediaPreview(msg.video)\"/>\r\n\r\n<!-- Text Message -->\r\n<div\r\n  v-if=\"!msg.audio && !msg.file && !msg.image && !msg.video\"\r\n  class=\"px-4 py-2 rounded-2xl text-sm whitespace-pre-wrap break-all \"\r\n  :class=\"msg.from === 'me' ? 'bg-blue-500 text-white' : 'bg-green-500 text-white'\">\r\n  {{ msg.text }}\r\n</div>\r\n\r\n        \r\n    \r\n<!-- Media Preview Modal -->\r\n<div\r\nv-if=\"mediaPreview\"\r\nclass=\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50\">\r\n<div class=\"relative\">\r\n<component\r\n:is=\"previewType === 'video' ? 'video' : 'img'\" \r\n:src=\"mediaPreview\"\r\nclass=\"max-w-[90vw] max-h-[85vh] rounded-lg shadow-xl\"\r\nv-bind=\"previewType === 'video' ? { controls: true } : {}\"/>\r\n<button\r\n@click=\"mediaPreview = null\"\r\nclass=\"absolute top-2 right-2 bg-black bg-opacity-50 p-2 rounded-full text-white hover:bg-opacity-70\"\r\ntitle=\"Close\">\r\n<Icon icon=\"ic:round-close\" class=\"w-6 h-6\" />\r\n</button>\r\n</div>\r\n</div>\r\n\r\n\r\n\r\n<!-- Delete Button (Visible on Hover) -->\r\n<button\r\n  class=\"absolute top-1 right-1 text-white text-xs bg-black bg-opacity-50 p-1 rounded-full hidden group-hover:block\"\r\n  @click=\"deleteMessage(index)\"\r\n  title=\"Delete\">\r\n</button>\r\n\r\n<!-- Forward Button -->\r\n<button\r\n  class=\"absolute bottom-1 right-8 text-xs text-white bg-blue-500 hover:bg-blue-600 rounded-full p-1 hidden group-hover:block\"\r\n  @click=\"forwardMessage(msg)\"\r\n  title=\"Forward\">\r\n  \r\n</button>\r\n\r\n<!-- Forward Modal -->\r\n<div v-if=\"forwardingMessage\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n<div class=\"bg-white rounded-xl p-4 w-80 shadow-lg\">\r\n<h2 class=\"text-lg font-semibold mb-3\">Forward to:</h2>\r\n<ul class=\"space-y-2\">\r\n<li\r\nv-for=\"friend in friends\"\r\n:key=\"friend.id\"\r\nclass=\"cursor-pointer hover:bg-gray-100 px-3 py-2 rounded\"\r\n @click=\"sendForwardTo(friend)\">\r\n{{ friend.name }}\r\n</li>\r\n</ul><button class=\"mt-4 text-sm text-red-500\" @click=\"forwardingMessage = null\">Cancel</button> \r\n</div>\r\n</div>\r\n\r\n\r\n<!--Time Stamp-->\r\n<p class=\"text-[11px] text-right opacity-70 mt-1\">{{ msg.time }}</p>\r\n</div>\r\n</div>\r\n</div>\r\n\r\n\r\n\r\n<!-- Input Area -->\r\n<div class=\" px-2 py-3 bg-white flex items-center gap-2\">\r\n<!-- Outer rounded box containing textarea + icons -->\r\n<div class=\"flex items-center flex-1 bg-white border border-gray-400 rounded-full px-3 py-2 shadow-sm gap-2\">\r\n    \r\n<!-- Mic -->\r\n<button\r\n@click=\"toggleRecording\"\r\nclass=\"text-gray-500 hover:text-red-500 transition\"\r\n:title=\"isRecording ? 'Stop recording' : 'Start recording'\">\r\n<Icon :icon=\"isRecording ? 'mdi:stop-circle-outline' : 'material-symbols:mic'\" class=\"w-5 h-5\" />\r\n</button>\r\n\r\n<!-- Textarea -->\r\n<textarea\r\n  v-model=\"newMessage\"\r\n  placeholder=\"Write something...\"\r\n  class=\"flex-1 bg-transparent text-sm text-black resize-none overflow-y-auto leading-snug align-top max-h-40 outline-none\"\r\n  rows=\"1\"\r\n  @input=\"autoResize\"\r\n  @keydown.enter.prevent=\"sendMessage\">\r\n  </textarea>\r\n\r\n    <!-- Photo/Video -->\r\n    <label class=\"cursor-pointer\">\r\n    <Icon icon=\"tabler:photo\" class=\"w-5 h-5 text-gray-500 hover:text-green-500\" />\r\n    <input type=\"file\" accept=\"image/*,video/*\" multiple hidden @change=\"handleMediaUpload\" />\r\n    </label>\r\n\r\n    <!-- Emoji -->\r\n    <button @click=\"toggleEmojiPicker\" title=\"Insert Emoji\">\r\n    <Icon icon=\"fa-regular:smile\" class=\"w-5 h-5 text-gray-500 hover:text-yellow-500\" />\r\n    </button>\r\n\r\n    <!-- File Attach -->\r\n    <button @click=\"triggerFileInput\" title=\"Attach File\" class=\"text-gray-500 hover:text-gray-800\">\r\n    <Icon icon=\"tdesign:attach\" class=\"w-5 h-5\" />\r\n    </button>\r\n    <input\r\n      ref=\"fileInput\"\r\n      type=\"file\"\r\n      accept=\".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.zip,.rar\"\r\n      hidden\r\n      @change=\"handleFileUpload\"/>\r\n\r\n  <!-- Send -->\r\n<button @click=\"sendMessage\" class=\"text-blue-500 hover:text-blue-700\">\r\n<Icon icon=\"ic:round-send\" class=\"w-5 h-5\" />\r\n</button>\r\n</div>\r\n</div>\r\n\r\n<!-- Emoji Picker Overlay -->\r\n<div\r\n  v-if=\"showEmojiPicker\"\r\n  class=\"fixed inset-0 flex items-center justify-center z-50\"\r\n  @click.self=\"showEmojiPicker = false\">\r\n  <div class=\"bg-white p-3 rounded-xl shadow-lg border w-80 max-h-[80vh] overflow-y-auto\">\r\n  <EmojiPicker @select=\"addEmoji\" />\r\n  </div>\r\n\r\n\r\n\r\n\r\n\r\n<!-- Floating Voice Waveform Bar -->\r\n<div\r\nv-if=\"isRecording\"\r\nclass=\"fixed bottom-24 left-1/2 -translate-x-1/2 z-50   \r\nbg-blue-600 rounded-full px-6 py-2 shadow-lg\r\nflex items-center justify-between gap-4 h-12 w-[360px] max-w-[90vw]\">\r\n\r\n         \r\n<!-- Animated Bars -->\r\n<div class=\"flex items-end gap-[2px] flex-1\">\r\n<div\r\nv-for=\"(bar, i) in waveformData\"\r\n:key=\"i\"\r\n:style=\"{ height: `${bar}px` }\"\r\nclass=\"w-[2px] bg-white rounded-sm transition-all duration-75 \"/>\r\n  </div>\r\n\r\n<!-- Timer Floating -->\r\n<div class=\"flex flex-col min-w-[60px]\">\r\n<span class=\"text-xs font-mono\">{{ recordingTimerDisplay }}</span>\r\n</div>\r\n</div>\r\n\r\n</div>\r\n<slot>\r\n</slot>\r\n</div>\r\n</div>\r\n</div>\r\n\r\n</template>\r\n\r\n<script setup>\r\nimport {  computed } from 'vue'\r\nimport { ref, nextTick } from 'vue'\r\nimport { Icon } from '@iconify/vue'\r\nimport EmojiPicker from 'vue3-emoji-picker'\r\nimport 'vue3-emoji-picker/css'\r\n\r\n\r\nconst props = defineProps({\r\n  currentUser: Object,\r\n  friends: Array,\r\n});\r\n\r\n\r\n\r\nconst searchQuery = ref('');\r\nconst chatStarted = ref(false);\r\nconst selectedUser = ref(null);\r\n\r\nconst filteredFriends = computed(() => {\r\n  return props.friends.filter(friend =>\r\n    friend.name.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n  );\r\n});\r\n\r\nfunction selectFriend(friend) {\r\n  selectedUser.value = friend;\r\n  chatStarted.value = true;\r\n}\r\n\r\n\r\n\r\n\r\nimport sinayun from '@/assets/jeny3.jpg'\r\nimport story1 from '@/assets/story1.jpg'\r\nimport story2 from '@/assets/story2.jpg'\r\nimport story3 from '@/assets/story3.jpg'\r\nimport story4 from '@/assets/story4.jpg'\r\nimport story5 from '@/assets/story5.jpg'\r\n\r\n\r\n// States\r\nconst newMessage = ref('')\r\nconst showEmojiPicker = ref(false)\r\nconst messages = ref([])\r\n\r\n\r\nconst currentUser = ref({\r\n  name: 'sinayun_xyn',\r\n  role: 'Software Engineering',\r\n  avatar: sinayun\r\n})\r\n\r\n\r\n\r\n\r\n// Friend List\r\nconst friends = [\r\n  { id: 1, name: 'nita_lovekhmer', time: '01:12 PM', avatar: story1 },\r\n  { id: 2, name: 'áž“áž¶ážšáž¸_lovekhmer', time: '06:16 AM', avatar: story2 },\r\n  { id: 3, name: 'ycn_lovekhm', time: '01:12 PM', avatar: story3 },\r\n  { id: 4, name: 'Konsreypov', time: '1:12 PM', avatar: story4 },\r\n  { id: 5, name: 'Kon_Khmer', time: '1:12 PM', avatar: story5 }\r\n\r\n]\r\n\r\n\r\n// Send message\r\nfunction sendMessage() {\r\n  if (newMessage.value.trim()) {\r\n    const now = new Date()\r\n    const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n    messages.value.push({\r\n      text: newMessage.value.trim(),\r\n      from: 'me',\r\n      user: currentUser.value.name,\r\n      avatar: currentUser.value.avatar,\r\n      time,\r\n      date: getFormattedDate(now)\r\n    })\r\n\r\n    newMessage.value = ''\r\n    scrollToBottomSmart()\r\n\r\n    // Remove bot reply completely\r\n  }\r\n}\r\n\r\n// Emoji picker\r\nfunction toggleEmojiPicker() {\r\n  showEmojiPicker.value = !showEmojiPicker.value\r\n}\r\n\r\nfunction addEmoji(emoji) {\r\n  newMessage.value += emoji.i\r\n}\r\n\r\n// Format Date\r\nfunction getFormattedDate(date) {\r\n  return date.toLocaleDateString('en-GB') // Change format as needed\r\n}\r\n\r\n// Scroll to bottom smoothly\r\nfunction scrollToBottomSmart() {\r\n  nextTick(() => {\r\n    const chatContainer = document.querySelector('.flex-1.overflow-y-auto')\r\n    if (chatContainer) {\r\n      chatContainer.scrollTop = chatContainer.scrollHeight\r\n    }\r\n  })\r\n}\r\n\r\n\r\n\r\n// File handlers (optional)\r\nfunction handleMediaUpload(e) {\r\n  const files = Array.from(e.target.files)\r\n  if (!files.length) return\r\n\r\n  files.forEach(file => {\r\n    const reader = new FileReader()\r\n    reader.onload = () => {\r\n      const now = new Date()\r\n      const isVideo = file.type.startsWith('video')\r\n\r\n      messages.value.push({\r\n        from: 'me',\r\n        avatar: currentUser.value.avatar,\r\n        time: now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\r\n        [isVideo ? 'video' : 'image']: reader.result\r\n      })\r\n\r\n      scrollToBottomSmart()\r\n    }\r\n    reader.readAsDataURL(file)\r\n  })\r\n}\r\n\r\n\r\n\r\n\r\nconst mediaPreview = ref(null)\r\n\r\nfunction openMediaPreview(src) {\r\n  mediaPreview.value = src\r\n}\r\n\r\nfunction deleteMessage(index) {\r\n  messages.value.splice(index, 1)\r\n}\r\n\r\n\r\n//Paper Clip\r\nconst fileInput = ref(null)\r\n\r\nfunction triggerFileInput() {\r\n  fileInput.value?.click()\r\n}\r\n\r\nfunction handleFileUpload(e) {\r\n  const file = e.target.files[0]\r\n  if (!file) return\r\n\r\n  const now = new Date()\r\n  const url = URL.createObjectURL(file)\r\n\r\n  messages.value.push({\r\n    from: 'me',\r\n    avatar: currentUser.value.avatar,\r\n    file: {\r\n      name: file.name,\r\n      type: file.type,\r\n      url\r\n    },\r\n    time: now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n  })\r\n}\r\n\r\n\r\n//Mic \r\nconst recordingTimer = ref(0) // Timer in seconds\r\n\r\nconst recordingTimerDisplay = computed(() => {\r\n  const min = String(Math.floor(recordingTimer.value / 60)).padStart(2, '0')\r\n  const sec = String(recordingTimer.value % 60).padStart(2, '0')\r\n  return `${min}:${sec}`\r\n})\r\n\r\n\r\n\r\n\r\n\r\nconst isRecording = ref(false)\r\nlet mediaRecorder = null\r\nlet audioChunks = []\r\nlet timerInterval = null\r\nlet audioContext = null\r\nlet analyser = null\r\nlet animationId = null\r\n\r\n\r\n\r\nfunction toggleRecording() {\r\n  if (isRecording.value) {\r\n    stopRecording()\r\n  } else {\r\n    startRecording()\r\n  }\r\n}\r\nfunction startRecording() {\r\n  navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {\r\n    mediaRecorder = new MediaRecorder(stream)\r\n    audioChunks = []\r\n\r\n    mediaRecorder.ondataavailable = (e) => audioChunks.push(e.data)\r\n\r\n    mediaRecorder.onstop = () => {\r\n      clearInterval(timerInterval)\r\n      cleanupAudioVisualizer()\r\n      if (!audioChunks.length) return\r\n\r\n      const blob = new Blob(audioChunks, { type: 'audio/webm' })\r\n      const url = URL.createObjectURL(blob)\r\n\r\n      messages.value.push({\r\n        from: 'me',\r\n        avatar: currentUser.value.avatar,\r\n        audio: url,\r\n        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n      })\r\n    }\r\n\r\n    mediaRecorder.start()\r\n    isRecording.value = true\r\n    recordingTimer.value = 0\r\n\r\n    // âœ… This line fixes the warning and activates the waveform\r\n    startWaveformVisualizer(stream)\r\n\r\n    timerInterval = setInterval(() => {\r\n      recordingTimer.value++\r\n    }, 1000)\r\n  })\r\n}\r\n\r\n\r\n \r\nfunction stopRecording() {\r\n  if (mediaRecorder && isRecording.value) {\r\n    mediaRecorder.stop()\r\n    isRecording.value = false\r\n    clearInterval(timerInterval)\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//Touch Audio\r\nconst touchStartX = ref(0)\r\nconst touchEndX = ref(0)\r\n\r\nfunction onTouchStart(e) {\r\n  touchStartX.value = e.touches[0].clientX\r\n}\r\n\r\nfunction onTouchMove(e) {\r\n  touchEndX.value = e.touches[0].clientX\r\n}\r\n\r\nfunction onTouchEnd(index) {\r\n  const distance = touchStartX.value - touchEndX.value\r\n  if (distance > 80) {\r\n    // Swipe left = delete audio\r\n    messages.value.splice(index, 1)\r\n  }\r\n}\r\n\r\n\r\n//Wave voice\r\nconst waveformData = ref(new Array(80).fill(4)) // 80 bars at 4px height\r\n\r\n// ðŸŽ¤ Start mic visualizer\r\nfunction startWaveformVisualizer(stream) {\r\n  audioContext = new (window.AudioContext || window.webkitAudioContext)()\r\n  const source = audioContext.createMediaStreamSource(stream)\r\n  analyser = audioContext.createAnalyser()\r\n  analyser.fftSize = 64\r\n  source.connect(analyser)\r\n\r\n  const bufferLength = analyser.frequencyBinCount\r\n  const dataArray = new Uint8Array(bufferLength)\r\n\r\n  const render = () => {\r\n    analyser.getByteFrequencyData(dataArray)\r\n\r\n    waveformData.value = dataArray\r\n      .slice(0, waveformData.value.length)\r\n      .map(v => Math.max(4, (v / 255) * 28)) // scale height smoothly\r\n\r\n    animationId = requestAnimationFrame(render)\r\n  }\r\n\r\n  render()\r\n}\r\n\r\n// ðŸ§¼ Stop mic visualizer\r\nfunction cleanupAudioVisualizer() {\r\n  cancelAnimationFrame(animationId)\r\n  if (audioContext) {\r\n    audioContext.close()\r\n    audioContext = null\r\n  }\r\n  waveformData.value = new Array(80).fill(4)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//Swipe Audio\r\nfunction swipeTranslateX() {\r\n  const distance = touchStartX.value - touchEndX.value\r\n  return distance > 0 ? `translateX(-${Math.min(distance, 100)}px)` : ''\r\n}\r\n\r\n\r\n// Forward  massage\r\nconst forwardingMessage = ref(null)\r\n\r\nfunction forwardMessage(msg) {\r\n  forwardingMessage.value = msg\r\n}\r\n\r\nfunction sendForwardTo(friend) {\r\n  const now = new Date()\r\n  const forwarded = { ...forwardingMessage.value, time: now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) }\r\n\r\n  // simulate message going to another user\r\n  messages.value.push({\r\n    ...forwarded,\r\n    from: 'me',\r\n    forwardedTo: friend.name\r\n  })\r\n\r\n  forwardingMessage.value = null\r\n}\r\n\r\n// Auto row\r\n\r\nconst autoResize = (e) => {\r\n  const el = e.target\r\n  el.style.height = 'auto'\r\n  el.style.height = el.scrollHeight + 'px'\r\n}\r\n\r\n\r\n//\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n/* Optional fallback to make modal clickable */\r\n.z-50 {\r\n  z-index: 9999;\r\n\r\n\r\n\r\n\r\n}\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}