{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen flex items-center justify-center bg-gray-100 px-4\"\n};\nconst _hoisted_2 = {\n  class: \"w-full max-w-sm bg-white p-6 rounded-md shadow text-center\"\n};\nconst _hoisted_3 = {\n  class: \"text-xs text-gray-600 mb-4\"\n};\nconst _hoisted_4 = {\n  class: \"font-medium\"\n};\nconst _hoisted_5 = {\n  class: \"flex justify-between gap-2 mb-4\"\n};\nconst _hoisted_6 = [\"onUpdate:modelValue\", \"onInput\", \"onKeydown\"];\nconst _hoisted_7 = {\n  key: 0,\n  class: \"text-red-500 text-sm mb-3\"\n};\nconst _hoisted_8 = {\n  class: \"text-xs text-gray-500 mt-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"h1\", {\n    class: \"text-2xl font-bold text-green-600 mb-1\"\n  }, \"Verify Code\", -1)), _createElementVNode(\"p\", _hoisted_3, [_cache[2] || (_cache[2] = _createTextVNode(\" We've sent a 6-digit code to \")), _createElementVNode(\"span\", _hoisted_4, _toDisplayString($data.contact), 1)]), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.digits, (d, i) => {\n    return _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n      key: i,\n      \"onUpdate:modelValue\": $event => $data.digits[i] = $event,\n      ref_for: true,\n      ref: \"digitInputs\",\n      maxlength: \"1\",\n      type: \"text\",\n      class: \"w-10 h-12 text-center border border-gray-300 rounded text-xl\",\n      onInput: $event => $options.moveFocus(i),\n      onKeydown: e => $options.handleKeydown(e, i)\n    }, null, 40, _hoisted_6)), [[_vModelText, $data.digits[i]]]);\n  }), 128))]), $data.error ? (_openBlock(), _createElementBlock(\"p\", _hoisted_7, _toDisplayString($data.error), 1)) : _createCommentVNode(\"\", true), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.verifyCode && $options.verifyCode(...args)),\n    class: \"w-full bg-green-500 text-white font-semibold py-2 rounded hover:bg-green-600 text-sm\"\n  }, \" Verify \"), _createElementVNode(\"p\", _hoisted_8, [_cache[3] || (_cache[3] = _createTextVNode(\" Didn't receive it? \")), _createElementVNode(\"span\", {\n    class: \"text-blue-500 hover:underline cursor-pointer\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.resendCode && $options.resendCode(...args))\n  }, \"Resend\")])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","$data","contact","_hoisted_5","_Fragment","_renderList","digits","d","i","key","$event","ref","maxlength","type","onInput","$options","moveFocus","onKeydown","e","handleKeydown","error","_hoisted_7","onClick","_cache","args","verifyCode","_hoisted_8","resendCode"],"sources":["D:\\login-feed\\src\\components\\Verify.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen flex items-center justify-center bg-gray-100 px-4\">\r\n    <div class=\"w-full max-w-sm bg-white p-6 rounded-md shadow text-center\">\r\n      <h1 class=\"text-2xl font-bold text-green-600 mb-1\">Verify Code</h1>\r\n      <p class=\"text-xs text-gray-600 mb-4\">\r\n        We've sent a 6-digit code to <span class=\"font-medium\">{{ contact }}</span>\r\n      </p>\r\n\r\n      <!-- 6 Code Boxes -->\r\n      <div class=\"flex justify-between gap-2 mb-4\">\r\n        <input\r\n          v-for=\"(d, i) in digits\"\r\n          :key=\"i\"\r\n          v-model=\"digits[i]\"\r\n          ref=\"digitInputs\"\r\n          maxlength=\"1\"\r\n          type=\"text\"\r\n          class=\"w-10 h-12 text-center border border-gray-300 rounded text-xl\"\r\n          @input=\"moveFocus(i)\"\r\n          @keydown=\"(e) => handleKeydown(e, i)\"\r\n        />\r\n      </div>\r\n\r\n      <p v-if=\"error\" class=\"text-red-500 text-sm mb-3\">{{ error }}</p>\r\n\r\n      <!-- Submit -->\r\n      <button\r\n        @click=\"verifyCode\"\r\n        class=\"w-full bg-green-500 text-white font-semibold py-2 rounded hover:bg-green-600 text-sm\"\r\n      >\r\n        Verify\r\n      </button>\r\n\r\n      <!-- Resend -->\r\n      <p class=\"text-xs text-gray-500 mt-4\">\r\n        Didn't receive it?\r\n        <span class=\"text-blue-500 hover:underline cursor-pointer\" @click=\"resendCode\">Resend</span>\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Verify',\r\n\r\n  data() {\r\n    return {\r\n      contact: '',\r\n      digits: ['', '', '', '', '', ''],\r\n      digitInputs: [],\r\n      error: ''\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    // Get email from localStorage\r\n    this.contact = localStorage.getItem('verifyEmail') || ''\r\n\r\n    // Focus first input\r\n    this.$nextTick(() => {\r\n      this.digitInputs = this.$refs.digitInputs\r\n      this.digitInputs[0]?.focus()\r\n    })\r\n  },\r\n\r\n  methods: {\r\n    moveFocus(i) {\r\n      if (this.digits[i].length === 1 && i < 5) {\r\n        this.digitInputs[i + 1]?.focus()\r\n      }\r\n    },\r\n\r\n    handleKeydown(e, i) {\r\n      if (e.key === 'Backspace' && !this.digits[i] && i > 0) {\r\n        this.digitInputs[i - 1]?.focus()\r\n      } else if (e.key === 'Enter') {\r\n        this.verifyCode()\r\n      }\r\n    },\r\n\r\n    async verifyCode() {\r\n      const fullCode = this.digits.join('')\r\n\r\n      if (!/^\\d{6}$/.test(fullCode)) {\r\n        this.error = 'Code must be 6 digits.'\r\n        return\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('http://localhost:3000/verify-code', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ email: this.contact, code: fullCode })\r\n        })\r\n\r\n        const result = await response.json()\r\n\r\n        if (result.success) {\r\n          alert(' Verified successfully!')\r\n          this.$router.push('/feed')\r\n        } else {\r\n          this.error = result.message || 'Invalid code. Try again.'\r\n        }\r\n      } catch (err) {\r\n        console.error(err)\r\n        this.error = 'Server error. Please try again.'\r\n      }\r\n    },\r\n\r\n    async resendCode() {\r\n      try {\r\n        const res = await fetch('http://localhost:3000/send-code', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ email: this.contact })\r\n        })\r\n        const data = await res.json()\r\n\r\n        if (data.success) {\r\n          alert('ðŸ“¨ A new code was sent!')\r\n          this.digits = ['', '', '', '', '', '']\r\n          this.$nextTick(() => this.digitInputs[0]?.focus())\r\n          this.error = ''\r\n        } else {\r\n          this.error = data.message || 'Failed to resend code.'\r\n        }\r\n      } catch (err) {\r\n        console.error(err)\r\n        this.error = 'Server error. Please try again.'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAgE;;EACpEA,KAAK,EAAC;AAA4D;;EAElEA,KAAK,EAAC;AAA4B;;EACAA,KAAK,EAAC;AAAa;;EAInDA,KAAK,EAAC;AAAiC;;;;EAc5BA,KAAK,EAAC;;;EAWnBA,KAAK,EAAC;AAA4B;;uBAjCzCC,mBAAA,CAsCM,OAtCNC,UAsCM,GArCJC,mBAAA,CAoCM,OApCNC,UAoCM,G,0BAnCJD,mBAAA,CAAmE;IAA/DH,KAAK,EAAC;EAAwC,GAAC,aAAW,QAC9DG,mBAAA,CAEI,KAFJE,UAEI,G,2CAFkC,gCACP,IAAAF,mBAAA,CAA8C,QAA9CG,UAA8C,EAAAC,gBAAA,CAAjBC,KAAA,CAAAC,OAAO,M,GAInEN,mBAAA,CAYM,OAZNO,UAYM,I,kBAXJT,mBAAA,CAUEU,SAAA,QAAAC,WAAA,CATiBJ,KAAA,CAAAK,MAAM,GAAfC,CAAC,EAAEC,CAAC;0CADdd,mBAAA,CAUE;MARCe,GAAG,EAAED,CAAC;uCACEP,KAAA,CAAAK,MAAM,CAACE,CAAC,IAAAE,MAAA;;MACjBC,GAAG,EAAC,aAAa;MACjBC,SAAS,EAAC,GAAG;MACbC,IAAI,EAAC,MAAM;MACXpB,KAAK,EAAC,8DAA8D;MACnEqB,OAAK,EAAAJ,MAAA,IAAEK,QAAA,CAAAC,SAAS,CAACR,CAAC;MAClBS,SAAO,EAAGC,CAAC,IAAKH,QAAA,CAAAI,aAAa,CAACD,CAAC,EAAEV,CAAC;8CAN1BP,KAAA,CAAAK,MAAM,CAACE,CAAC,G;eAUZP,KAAA,CAAAmB,KAAK,I,cAAd1B,mBAAA,CAAiE,KAAjE2B,UAAiE,EAAArB,gBAAA,CAAZC,KAAA,CAAAmB,KAAK,S,+BAG1DxB,mBAAA,CAKS;IAJN0B,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAET,QAAA,CAAAU,UAAA,IAAAV,QAAA,CAAAU,UAAA,IAAAD,IAAA,CAAU;IAClB/B,KAAK,EAAC;KACP,UAED,GAGAG,mBAAA,CAGI,KAHJ8B,UAGI,G,2CAHkC,sBAEpC,IAAA9B,mBAAA,CAA4F;IAAtFH,KAAK,EAAC,8CAA8C;IAAE6B,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAET,QAAA,CAAAY,UAAA,IAAAZ,QAAA,CAAAY,UAAA,IAAAH,IAAA,CAAU;KAAE,QAAM,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}