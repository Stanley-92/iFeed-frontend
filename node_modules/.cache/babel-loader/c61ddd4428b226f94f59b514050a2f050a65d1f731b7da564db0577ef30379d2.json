{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Icon = _resolveComponent(\"Icon\");\n  return _openBlock(), _createElementBlock(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.signInWithGoogle && $options.signInWithGoogle(...args)),\n    class: \"relative flex items-center justify-center gap-4 px-4 py-2 mb-2 text-base font-medium text-gray-700 bg-gray-200 border-2 border-gray-300 rounded-full shadow-sm hover:shadow-md hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-shadow\"\n  }, [_createVNode(_component_Icon, {\n    icon: \"flat-color-icons:google\",\n    class: \"w-6 h-6\"\n  }), _cache[1] || (_cache[1] = _createElementVNode(\"span\", null, \"Connect with Google\", -1 /* CACHED */))]);\n}","map":{"version":3,"names":["_createElementBlock","onClick","_cache","args","$options","signInWithGoogle","class","_createVNode","_component_Icon","icon","_createElementVNode"],"sources":["D:\\login-feed\\src\\components\\GoogleSignInButton.vue"],"sourcesContent":["<template>\r\n  <button @click=\"signInWithGoogle\"\r\n    class=\"relative flex items-center justify-center gap-4 px-4 \r\n           py-2 mb-2 text-base font-medium text-gray-700 bg-gray-200 border-2 \r\n           border-gray-300 rounded-full shadow-sm hover:shadow-md \r\n           hover:border-gray-400 focus:outline-none focus:ring-2 \r\n           focus:ring-offset-2 focus:ring-blue-500 transition-shadow\">\r\n    <Icon icon=\"flat-color-icons:google\" class=\"w-6 h-6\" />\r\n    <span>Connect with Google</span>\r\n  </button>\r\n</template>\r\n\r\n<script>\r\nimport { Icon } from '@iconify/vue';\r\nimport { auth } from '@/firebase';\r\nimport { GoogleAuthProvider, signInWithPopup, signInWithRedirect,\r\n   getRedirectResult } from 'firebase/auth';\r\n\r\nexport default {\r\n  name: 'GoogleSignInButton',\r\n  components: { Icon },\r\n  props: {\r\n    redirectAfter: { type: String, default: 'ProfileUser' } // allow custom redirect page\r\n  },\r\n  data() {\r\n    return { isLoading: false };\r\n  },\r\n\r\n\r\n  async mounted() {\r\n    try {\r\n      const result = await getRedirectResult(auth);\r\n      if (result?.user) {\r\n        await this.handleGoogleSuccess(result.user);\r\n      }\r\n    } catch (error) {\r\n      console.error('Google redirect error:', error);\r\n    }\r\n  },\r\n\r\n\r\n  methods: {\r\n    async handleGoogleSuccess(user) {\r\n      const displayName = user.displayName || '';\r\n      const nameParts = displayName.split(' ');\r\n      const firstName = nameParts[0] || '';\r\n      const lastName = nameParts.slice(1).join(' ') || '';\r\n      const googleAvatar = user.photoURL || '';\r\n\r\n      const userData = { firstName, lastName, email: user.email };\r\n\r\n      // Save locally for profile display\r\n      localStorage.setItem('newUserData', JSON.stringify(userData));\r\n      localStorage.setItem('userUid', user.uid);\r\n      localStorage.setItem('userEmail', user.email);\r\n      localStorage.setItem('userDisplayName', displayName);\r\n      localStorage.setItem('userAvatar', googleAvatar);\r\n\r\n      // Redirect\r\n      await this.$router.push({ name: this.redirectAfter });\r\n    },\r\n\r\n\r\n    \r\n\r\n    async signInWithGoogle() {\r\n      if (this.isLoading) return;\r\n      this.isLoading = true;\r\n\r\n      const provider = new GoogleAuthProvider();\r\n      provider.setCustomParameters({ prompt: 'select_account' });\r\n\r\n      try {\r\n        const result = await signInWithPopup(auth, provider);\r\n        if (result?.user) await this.handleGoogleSuccess(result.user);\r\n      } catch (error) {\r\n        if (error.code === 'auth/popup-blocked') {\r\n          await signInWithRedirect(auth, provider);\r\n        } else if (error.code !== 'auth/popup-closed-by-user') {\r\n          console.error('Google sign-in error:', error);\r\n          alert('Failed to connect Google account.');\r\n        }\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"mappings":";;;uBACEA,mBAAA,CAQS;IARAC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,gBAAA,IAAAD,QAAA,CAAAC,gBAAA,IAAAF,IAAA,CAAgB;IAC9BG,KAAK,EAAC;MAKNC,YAAA,CAAuDC,eAAA;IAAjDC,IAAI,EAAC,yBAAyB;IAACH,KAAK,EAAC;gCAC3CI,mBAAA,CAAgC,cAA1B,qBAAmB,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}