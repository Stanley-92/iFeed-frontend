{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Icon } from '@iconify/vue';\nimport story1 from '@/assets/Khmer.jpg';\nimport story2 from '@/assets/jena8.jpg';\nimport story3 from '@/assets/sinayun_xyn.jpg';\nimport { signInWithEmailAndPassword, sendEmailVerification } from 'firebase/auth';\nimport { auth } from '../firebase';\nexport default {\n  name: 'Login',\n  components: {\n    Icon\n  },\n  data() {\n    return {\n      email: '',\n      password: '',\n      loading: false,\n      showPassword: false,\n      stories: [{\n        img: story2,\n        rotate: '-14deg',\n        right: '70px',\n        z: 2\n      }, {\n        img: story1,\n        rotate: '12deg',\n        left: '300px',\n        z: 1\n      }, {\n        img: story3,\n        rotate: '-2deg',\n        left: '168px',\n        z: 1\n      }]\n    };\n  },\n  methods: {\n    async login() {\n      if (this.loading) return;\n      if (!this.email || !this.password) {\n        alert('Please enter both email and password.');\n        return;\n      }\n      this.loading = true;\n      try {\n        const {\n          user\n        } = await signInWithEmailAndPassword(auth, this.email, this.password);\n\n        //  Block access if email not verified\n        if (!user.emailVerified) {\n          await sendEmailVerification(user);\n          alert('Verification email sent. Please verify before login.');\n          return;\n        }\n\n        //  Verified → go to feed\n        this.$router.push('/feed');\n      } catch (error) {\n        console.error(error);\n        alert(this.getErrorMessage(error.code));\n      } finally {\n        this.loading = false;\n      }\n    },\n    // REMOVE mounted() completely\n\n    async login() {\n      if (this.loading) return;\n      if (!this.email || !this.password) {\n        alert('Please enter both email and password.');\n        return;\n      }\n      this.loading = true;\n      try {\n        const {\n          user\n        } = await signInWithEmailAndPassword(auth, this.email, this.password);\n        if (!user.emailVerified) {\n          await sendEmailVerification(user);\n          alert('Verification email sent.');\n          return;\n        }\n\n        // Clear password only after success\n        this.password = '';\n        this.$router.push('/feed');\n      } catch (error) {\n        alert(this.getErrorMessage(error.code));\n      } finally {\n        this.loading = false;\n      }\n    },\n    getErrorMessage(code) {\n      const messages = {\n        'auth/user-not-found': 'Account not found.',\n        'auth/wrong-password': 'Incorrect password.',\n        'auth/invalid-email': 'Invalid email address.',\n        'auth/user-disabled': 'This account has been disabled.',\n        'auth/too-many-requests': 'Too many attempts. Try again later.'\n      };\n      return messages[code] || 'Login failed. Please try again.';\n    }\n  }\n};","map":{"version":3,"names":["Icon","story1","story2","story3","signInWithEmailAndPassword","sendEmailVerification","auth","name","components","data","email","password","loading","showPassword","stories","img","rotate","right","z","left","methods","login","alert","user","emailVerified","$router","push","error","console","getErrorMessage","code","messages"],"sources":["D:\\login-feed\\src\\components\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray flex items-center justify-center\">\r\n  <div class=\"flex w-full max-w-6xl items-center justify-between px-8 gap-10\">\r\n\r\n      <!-- LEFT TEXT -->\r\n\r\n\r\n<div class=\"flex min-h-[100dvh] mt-8  \">\r\n<aside >\r\n<div class=\" w-65 hidden md:block max-w-full\">\r\n<button class=\"flex-1 items-center pl-3 cursor-pointer \">\r\n<Icon icon=\"tdesign:chat-bubble\" \r\nclass=\"w-14 h-14 text-white transition-colors\r\n bg-green-500 border-4 border-green-500 rounded-xl\r\n  duration-200 hover:text-gray-600 mb-10\" \r\n @click=\"goToMainfeed\"/>\r\n</button>\r\n\r\n\r\n<div class=\"flex items-center gap-4 \">\r\n<p class=\"text-gray-600 leading-relaxed\">\r\n          Connect with the people in your life and the world. \r\n          Secure and safe sharing your activity.\r\n        </p>\r\n</div>\r\n\r\n   <!-- ACTION MENU -->\r\n    <!-----  <div class=\"flex flex-col gap-6 text-black\">\r\n          <div class=\"flex items-center gap-3\">\r\n          </div>\r\n      \r\n          <div class=\"flex items-center gap-3\">\r\n           <Icon icon=\"uil:comment\" class=\"w-10 h-10\"/>\r\n            <span class=\"text-xl font-semibold\">Share</span>\r\n          </div>\r\n        </div>\r\n--->\r\n      </div>\r\n\r\n      <!-- ACTION + STORY STACK -->\r\n      <div class=\"relative items-center mt-10 p-2  \">\r\n    <!-- CENTER STORY STACK -->\r\n      <div class=\"relative   items-center w-[360px] h-[320px] mt-10 px-4 mr-80  p-2\">\r\n        <img\r\n          v-for=\"(story, i) in stories\"\r\n          :key=\"i\"\r\n          :src=\"story.img\"\r\n          class=\"story-card\"\r\n          :style=\"{\r\n            transform: `rotate(${story.rotate})`,\r\n            left: story.left,\r\n            zIndex: story.z\r\n          }\"/>\r\n        </div>\r\n      \r\n  \r\n</div>\r\n\r\n</aside>\r\n\r\n</div>\r\n\r\n\r\n\r\n        \r\n \r\n\r\n\r\n      <!-- LOGIN FORM -->\r\n      <div class=\" border-2   p-8 rounded-xl shadow-md w-full max-w-sm  mb-50\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Email or Phone number\"\r\n          class=\"w-full mb-4 px-4 py-2 border-2 \r\n          rounded outline-none focus:ring-2 focus:ring-blue-500\"\r\n          v-model=\"email\"/>\r\n\r\n        <input\r\n          type=\"password\"\r\n   \r\n          placeholder=\"Password\"\r\n          class=\"w-full mb-4 px-4 py-2 border-2 rounded outline-none focus:ring-2 focus:ring-blue-500\"\r\n          v-model=\"password\" />\r\n\r\n        <button\r\n          class=\"w-full bg-blue-600 text-white \r\n          font-semibold py-2 rounded hover:bg-blue-700 mb-2\"\r\n          @click=\"login\" >\r\n          Login\r\n        </button>\r\n\r\n        <router-link\r\n          to=\"/forgot-password\"\r\n          class=\"text-sm text-center text-gray-500 mb-4 block\">\r\n          Forgot your password?\r\n        </router-link>\r\n\r\n        <hr class=\"mb-4\" />\r\n\r\n        <router-link to=\"/create\" class=\"block\">\r\n          <button\r\n            class=\"bg-green-600 text-white w-full\r\n             py-2 rounded text-sm font-semibold hover:bg-green-700\">\r\n            Create your account\r\n          </button>\r\n        </router-link>\r\n      </div>\r\n\r\n\r\n      \r\n\r\n    </div>\r\n\r\n   \r\n  </div>\r\n\r\n\r\n  \r\n</template>\r\n\r\n<script>\r\nimport { Icon } from '@iconify/vue';\r\nimport story1 from '@/assets/Khmer.jpg'\r\nimport story2 from '@/assets/jena8.jpg'\r\nimport story3 from '@/assets/sinayun_xyn.jpg'\r\n\r\nimport { signInWithEmailAndPassword, sendEmailVerification } from 'firebase/auth'\r\nimport { auth } from '../firebase'\r\n\r\n\r\nexport default {\r\n  name: 'Login',\r\n   components: { Icon },\r\n\r\n  data() {\r\n    return {\r\n      email: '',\r\n      password: '',\r\n      loading: false,\r\n      showPassword: false,\r\n\r\n\r\n      stories: [\r\n        { img: story2, rotate: '-14deg', right: '70px', z: 2 },\r\n        { img: story1, rotate: '12deg', left: '300px', z: 1},\r\n      \r\n        { img: story3, rotate: '-2deg', left: '168px', z: 1 }\r\n      ]\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    async login() {\r\n      if (this.loading) return\r\n\r\n      if (!this.email || !this.password) {\r\n        alert('Please enter both email and password.')\r\n        return\r\n      }\r\n\r\n      this.loading = true\r\n\r\n      try {\r\n        const { user } = await signInWithEmailAndPassword(\r\n          auth,\r\n          this.email,\r\n          this.password\r\n        )\r\n\r\n        //  Block access if email not verified\r\n        if (!user.emailVerified) {\r\n          await sendEmailVerification(user)\r\n          alert('Verification email sent. Please verify before login.')\r\n          return\r\n        }\r\n\r\n        //  Verified → go to feed\r\n        this.$router.push('/feed')\r\n\r\n      } catch (error) {\r\n        console.error(error)\r\n        alert(this.getErrorMessage(error.code))\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n// REMOVE mounted() completely\r\n\r\nasync login() {\r\n  if (this.loading) return\r\n\r\n  if (!this.email || !this.password) {\r\n    alert('Please enter both email and password.')\r\n    return\r\n  }\r\n\r\n  this.loading = true\r\n\r\n  try {\r\n    const { user } = await signInWithEmailAndPassword(auth, this.email, this.password)\r\n\r\n    if (!user.emailVerified) {\r\n      await sendEmailVerification(user)\r\n      alert('Verification email sent.')\r\n      return\r\n    }\r\n\r\n    // Clear password only after success\r\n    this.password = ''\r\n\r\n    this.$router.push('/feed')\r\n\r\n  } catch (error) {\r\n    alert(this.getErrorMessage(error.code))\r\n  } finally {\r\n    this.loading = false\r\n  }\r\n},\r\n\r\n\r\n\r\n\r\n    getErrorMessage(code) {\r\n      const messages = {\r\n        'auth/user-not-found': 'Account not found.',\r\n        'auth/wrong-password': 'Incorrect password.',\r\n        'auth/invalid-email': 'Invalid email address.',\r\n        'auth/user-disabled': 'This account has been disabled.',\r\n        'auth/too-many-requests': 'Too many attempts. Try again later.'\r\n      }\r\n      return messages[code] || 'Login failed. Please try again.'\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n\r\n\r\n\r\n<style scoped>\r\n\r\n.input {\r\n  @apply w-full mb-3 px-3 py-2 border rounded text-sm outline-none focus:ring-2 focus:ring-blue-500;\r\n}\r\n\r\n.btn-primary {\r\n  @apply w-full bg-blue-600 text-white py-2 rounded font-semibold;\r\n}\r\n\r\n.btn-success {\r\n  @apply w-full bg-green-600 text-white py-2 rounded text-sm font-semibold;\r\n}\r\n.story-card:hover {\r\n  transform: translateY(-8px) scale(1.05);\r\n  z-index: 50;\r\n}\r\n.story-card {\r\n  @apply absolute top-0\r\n  w-[148px] h-[240px]\r\n  rounded-2xl\r\n  object-cover\r\n  shadow-[0_20px_40px_rgba(0,0,0,0.78)]\r\n  transition-transform duration-300 ease-out;\r\n}\r\n\r\n/* Hover animation */\r\n.story-card:hover {\r\n  transform: translateY(-8px) scale(1.05) rotate(var(--tw-rotate));\r\n}\r\n\r\n.story-card:hover {\r\n  transform: translateY(-8px) scale(1.05);\r\n}\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}